{"version":3,"sources":["media/content-background.jpg","Config.js","Utils.js","Communicator.js","components/NoticationBar.js","components/Dropdown.js","components/Modal.js","components/LoadDialog.js","components/RegisterPage.js","components/Profile.js","components/ContentPage.js","components/RightMenu.js","components/ModeratorPage.js","components/PostPage.js","components/LeftMenu.js","App.js","components/Post.js","components/MainPage.js","index.js"],"names":["module","exports","User","createContext","Page","PageProvider","props","setPage","tag","setState","state","item","tags","includes","push","currentTags","popPage","length","pop","setTags","searchTerm","Provider","value","this","children","Component","UserProvider","editUser","details","username","followingSports","undefined","followingSport","followingTeams","followingCompetitions","followers","following","rank","moderatedTags","editTeams","team","type","fTeams","i","splice","editCompetitions","competition","fComps","addFollowing","set","Set","Array","from","removeFollowing","delete","isMod","token","isAuthenticated","document","cookie","EmbedLink","link","viewType","className","src","alt","url","getToken","split","logOut","multiple","key","removeCookies","window","location","reload","isEmptyOrSpaces","str","match","endPoint","Login","password","a","axios","post","toLowerCase","res","data","GetSelfInfo","GetUserInfo","Register","SubmitPost","title","body","isEmbed","time","DeletePost","id","postId","GetPosts","filter","GetPostsByUser","DoVote","voteType","commentId","GetTeams","get","GetLeagues","GetFixturesInLeague","leagueId","GetFixturesInLeagueByName","name","leagueName","GetFixtureDetails","fixtureId","GetTeamMatches","FollowUser","user","FollowTag","isAdded","MakeComment","description","isChild","GetPostComments","QuickSearch","term","PageSearch","FlagPost","MuteUser","person","muteDuration","BanUser","GetLogs","page","RemoveLog","logId","CheckIfPostExists","PromoteToMod","DemoteToUser","message","changeNotificationVisibility","NotificationBar","useState","visible","setVisibility","showNotification","mssg","callback","setTimeout","Dropdown","contentClass","setContentClass","setTitle","dropdown","useRef","documentClick","e","current","contains","target","useEffect","addEventListener","removeEventListener","onClick","stopPropagation","style","width","expanded","zIndex","ref","choices","map","choice","action","changeVisibility","modalSpecList","ModalSpec","modalName","modalFunc","additionalInfo","Run","visibility","LoginModal","setUsername","setPassword","setModalVisibility","onChange","event","Consumer","status","now","Date","getTime","setTime","toUTCString","followedSports","followedCompetitions","followedTeams","FeedbackModal","setText","topic","setTopic","margin","CreatePostModal","setBody","setLink","selectedTab","placeholder","submitPost","MuteUserModal","hours","setHours","minutes","setMinutes","convertTime","marginTop","parseInt","defaultValue","isNaN","find","checkLink","URL","_","validURL","spec","LoadScreen","setLoadScreen","isOn","selectedItems","sports","competitions","teams","confirmPass","RegisterPage","leagues","setLeagues","setTeams","league","itemsToArray","result","InitialPage","enabled","items","clicked","captchaPassed","setCaptchaPassed","sitekey","click","TileHolder","Tile","setStyle","add","currentUser","ProfileDesktop","userInfo","setUserInfo","postsPromise","userPromise","Promise","allSettled","then","results","posts","console","log","totalVotes","dateJoined","SocialLink","logo","updatedInfo","currentMatch","MatchAttribute","team1","value1","team2","value2","ShowContentPage","_currentMatch","ContentPage","updateFixtures","updateTab","changeContentPage","fixtureDetails","setFixtureDetails","fixture_id","isActivated","GetDetails","date","parse","event_date","background","toLocaleDateString","homeTeam","team_name","goalsHomeTeam","goalsAwayTeam","awayTeam","venue","score","halftime","home","away","profileUsername","backButtonListenerStack","addToBackButtonStack","count","level","fixture","lastTab","showUserProfile","RightMenuContent","setContentPageVisibility","selectFixtureTab","fixtureTabClicked","tab","setTab","fixtureTab","isContentPageVisible","fixtures","Tabs","setContent","NavigationBody","tabClick","currentPage","teamFixtures","setTeamFixtures","competitionFixtureResolver","statusArray","icon","filtered","statusShort","InfoTile","teamFixtureResolver","lastTag","secondLastTab","countryCode","_id","teamId","selectedCompetition","RightMenu","_setLogs","setFixtures","tabNumber","previousTab","res_team","res_league","getData","display","activated","currentPost","PostPage","input","setInput","CommentInput","typedComment","textInput","commentFilter","setCommentFilter","tree","commentArray","commentDictionary","transformToObject","parentId","isLeaf","votes","search","childrenIds","childrenTree","rowStack","firstRow","childId","row","newChildRow","child","branch","unshift","renderTree","sort","b","forEach","x","setDivision","embedUrl","FilterBar","root","Comment","replySelected","setReplySelected","reply","setReply","vote","setVotes","tArea","voteComment","CommentDropdown","dropdownVisibility","setDropdownVisibility","buttonDisplayData","setButtonDisplayData","dropdownSelect","toUpperCase","right","left","menuOpen","setMenuOpen","deletePost","DoVoteComment","showPostPage","Object","values","ModerationLog","logs","setLogs","Log","showPost","postTitle","postUsername","l","totalFlags","timeVal","newPost","toLocaleString","ModeratorPage","CredentialBar","nameClass","MenuColumn","MenuButton","onPress","iconClass","SetDivision","loadLogs","FollowingContainer","FollowingButton","itemClicked","TeamSearched","CompetitionSearched","LeftMenu","setDiv","Post","PostDropdown","setPosts","resp","isInBounds","some","elem","p","flagPost","muteUser","banUser","PostContainer","setFilter","setViewType","followClicked","tagsToGet","fetchData","SearchBar","CreatePostBar","execute","array","isUsed","followText","CreatePostButton","typingTimer","setTypingTimer","setActivation","users","searchResults","setSearchResults","setTerm","inputChanged","clearInterval","SearchPage","pageProvider","searchPage","reduce","prev","curr","isEmpty","SearchInPage","FixtureSearched","UserSearched","PostSearched","Division","division","NavBar","onMenuClick","val","menu","changeMenu","App","setMenu","getUser","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.2c865a0b.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/content-background.e23b19e7.jpg\";","/* eslint-disable eqeqeq */\r\nimport React, { createContext, Component, useContext, } from 'react'\r\n\r\nexport const User = createContext(null)\r\nexport const Page = createContext(null)\r\n\r\nexport class PageProvider extends Component {\r\n\r\n    constructor(props) {\r\n        super(props)\r\n\r\n        this.setPage = (tag) => {\r\n            this.setState(state => {\r\n\r\n                for (let item of tag) {\r\n                    if (!state.tags.includes(item)) {\r\n                        state.tags.push(item)\r\n                    }\r\n                }\r\n\r\n                state.currentTags = tag\r\n                return state\r\n            })\r\n        }\r\n\r\n        this.popPage = (tag) => {\r\n            this.setState(state => {\r\n                if (state.tags.includes(tag)) {\r\n                    if (state.tags.length == 1)\r\n                        return state\r\n\r\n                    state.tags.pop()\r\n                    state.currentTags = [state.tags[state.tags.length - 1]]\r\n\r\n                    return state\r\n                }\r\n                return state\r\n            })\r\n        }\r\n\r\n        this.setTags = (tags) => { //Only use for search as menu refresh relies on this\r\n            this.setState(state => {\r\n                state.tags = tags\r\n                state.currentTags = [tags[tags.length - 1]]\r\n                state.searchTerm = [tags[tags.length - 1]]\r\n                return state\r\n            })\r\n        }\r\n\r\n        this.state = {\r\n            searchTerm: null,\r\n            tags: ['home'],\r\n            currentTags: ['home'],\r\n            setPage: this.setPage,\r\n            popPage: this.popPage,\r\n            setTags: this.setTags\r\n        }\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <Page.Provider value={this.state}>\r\n                {this.props.children}\r\n            </Page.Provider>\r\n        )\r\n    }\r\n}\r\n\r\nclass UserProvider extends Component {\r\n    constructor(props) {\r\n        super(props)\r\n\r\n        this.editUser = (details) => {\r\n            this.setState(state => {\r\n                state.username = details.username\r\n                state.followingSports = details.followingSports == undefined ? [] : details.followingSport\r\n                state.followingTeams = details.followingTeams == undefined ? [] : details.followingTeams\r\n                state.followingCompetitions = details.followingCompetitions == undefined ? [] : details.followingCompetitions\r\n                state.followers = details.followers == undefined ? [] : details.followers\r\n                state.following = details.following == undefined ? [] : details.following\r\n                state.rank = details.rank\r\n                state.moderatedTags = details.moderatedTags\r\n                return details\r\n            })\r\n        }\r\n\r\n        this.editTeams = (team, type) => {\r\n            this.setState(state => {\r\n                let fTeams = [...state.followingTeams]\r\n\r\n                if (type == 'add') {\r\n                    for (let item of fTeams) {\r\n                        if (item[0] == team[0])\r\n                            return\r\n                    }\r\n\r\n                    fTeams.push(team)\r\n                } else {\r\n                    for (let i = 0; i < fTeams.length; i++) {\r\n                        if (fTeams[i][0] == team[0])\r\n                            fTeams.splice(i, 1)\r\n                    }\r\n                }\r\n\r\n                return {...state, followingTeams: fTeams}\r\n            })\r\n        }\r\n\r\n        this.editCompetitions = (competition, type) => {\r\n            this.setState(state => {\r\n                let fComps = [...state.followingCompetitions]\r\n\r\n                if (type == 'add') {\r\n                    for (let item of fComps) {\r\n                        if (item[0] == competition[0])\r\n                            return\r\n                    }\r\n\r\n                    fComps.push(competition)\r\n                } else {\r\n                    for (let i = 0; i < fComps.length; i++) {\r\n                        if (fComps[i][0] == competition[0])\r\n                            fComps.splice(i, 1)\r\n                    }\r\n                }\r\n                return { ...state, followingCompetitions: fComps }\r\n            })\r\n        }\r\n\r\n        this.addFollowing = (following) => {\r\n            this.setState(state => {\r\n                let set = new Set([...state.following, following])\r\n                state.following = Array.from(set)\r\n                return state\r\n            })\r\n        }\r\n\r\n        this.removeFollowing = (following) => {\r\n            this.setState(\r\n                state => {\r\n                    let set = new Set(state.following)\r\n                    set.delete(following)\r\n                    state.following = Array.from(set)\r\n                }\r\n            )\r\n        }\r\n\r\n        this.state = {\r\n            editCompetitions: this.editCompetitions,\r\n            editTeams: this.editTeams,\r\n            editUser: this.editUser,\r\n            addFollowing: this.addFollowing,\r\n            removeFollowing: this.removeFollowing,\r\n            isMod: () => this.state.rank != \"\" && this.state.rank != \"user\" ? true : false,\r\n            followingSports: [],\r\n            followingCompetitions: [],\r\n            followingTeams: [],\r\n            following: [],\r\n            followers: [],\r\n            username: null,\r\n            rank: '',\r\n            moderatedTags: [],\r\n            token: null\r\n        }\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <User.Provider value={this.state}>\r\n                {this.props.children}\r\n            </User.Provider>\r\n        )\r\n    }\r\n}\r\n\r\nexport default UserProvider","import React, { useRef, useEffect, useState, useContext } from 'react'\r\nimport Embed from 'react-embed'\r\nimport { User, Page } from './Config'\r\n\r\nexport function isAuthenticated() {\r\n  let cookie = document.cookie\r\n\r\n  if (cookie === \"\")\r\n    return false\r\n  else\r\n    return true\r\n}\r\n\r\nexport function EmbedLink(link, viewType) {\r\n  if (link.includes('fbcdn') || link.includes('twimg')) {\r\n    return <img className=\"image\" src={link} alt=\"[Content has been removed from host]\" ></img>\r\n  }\r\n  else if (link.includes('youtube')) {\r\n    return viewType == 0 ? <Embed url={link}></Embed> : <p className='video-placeholder'>VIDEO</p>\r\n  }\r\n}\r\n\r\nexport function getUser() {\r\n  alert('not implemented')\r\n}\r\n\r\nexport function getToken() {\r\n  let cookie = document.cookie\r\n\r\n  if (cookie === \"\")\r\n    return null\r\n\r\n  return cookie.split('=')[1]\r\n}\r\n\r\nexport function logOut() {\r\n  removeCookies()\r\n  window.location.reload()\r\n}\r\n\r\nfunction removeCookies() {\r\n  var res = document.cookie;\r\n  var multiple = res.split(\";\");\r\n  for (var i = 0; i < multiple.length; i++) {\r\n    var key = multiple[i].split(\"=\");\r\n    document.cookie = key[0] + \" =; expires = Thu, 01 Jan 1970 00:00:00 UTC\";\r\n  }\r\n}\r\n\r\nexport function isEmptyOrSpaces(str) {\r\n  return str === null || str.match(/^ *$/) !== null;\r\n}\r\n\r\nexport function validURL(str) {\r\n  try {\r\n    new URL(str)\r\n  } catch (_) {\r\n    return false\r\n  }\r\n  return true\r\n}\r\n\r\nexport function useModInBounds() {\r\n  let userContext = useContext(User)\r\n  let pageContext = useContext(Page)\r\n\r\n  if (userContext.rank == 'user' || userContext.rank == '')\r\n    return false\r\n\r\n  if (userContext.rank == 'admin')\r\n    return true\r\n\r\n  if (userContext.moderatedTags.includes(pageContext.currentTags[pageContext.currentTags.length - 1])) {\r\n    return true\r\n  }\r\n  else {\r\n    return false\r\n  }\r\n}","import axios from 'axios'\r\nimport { getToken } from './Utils'\r\n\r\n//http://192.168.1.135:80\r\n//https://sportsment.herokuapp.com\r\nlet endPoint = 'https://sportsment.herokuapp.com'\r\n\r\nexport async function Login(username, password) {\r\n    let res = await axios.post(`${endPoint}/auth/login`, { username: username.toLowerCase(), password: password })\r\n    return res.data\r\n}\r\n\r\nexport async function GetSelfInfo() {\r\n    let res = await axios.post(`${endPoint}/auth/selfinfo`, { token: getToken() })\r\n    return res.data\r\n}\r\n\r\nexport async function GetUserInfo(username) {\r\n    let res = await axios.post(`${endPoint}/auth/getuserinfo`, { username: username, token: getToken() })\r\n    return res.data\r\n}\r\n\r\nexport async function Register(username, password, following) {\r\n    let res = await axios.post(`${endPoint}/auth/register`, { username: username.toLowerCase(), password: password, following: following })\r\n    return res.data\r\n}\r\n\r\nexport async function SubmitPost(title, body, tags, isEmbed, link, time) {\r\n    let res = await axios.post(`${endPoint}/posts/create`, { title: title, body: body, tags: tags, isEmbed: isEmbed, link: link, time: time, token: getToken() })\r\n    return res.data\r\n}\r\n\r\nexport async function DeletePost(id){\r\n    let res = await axios.post(`${endPoint}/posts/delete`, { postId: id, token: getToken() })\r\n    return res.data\r\n}\r\n\r\nexport async function GetPosts(tags, filter) {\r\n    let res = await axios.post(`${endPoint}/posts/getposts`, { tags: tags, filter: filter })\r\n    return res.data\r\n}\r\n\r\nexport async function GetPostsByUser(username) {\r\n    let res = await axios.post(`${endPoint}/posts/getpostsbyuser`, { username: username, token: getToken() })\r\n    return res.data\r\n}\r\n\r\nexport async function DoVote(voteType, tag, postId) {\r\n    let res = await axios.post(`${endPoint}/posts/vote`, { token: getToken(), voteType: voteType, tag: tag, postId: postId })\r\n    return res.data\r\n}\r\n\r\nexport async function DoVoteComment(voteType, commentId) {\r\n    let res = await axios.post(`${endPoint}/comments/vote`, { token: getToken(), voteType: voteType, commentId: commentId })\r\n    return res.data\r\n}\r\n\r\nexport async function GetTeams() {\r\n    let res = await axios.get(`${endPoint}/teams/getteams`)\r\n    return res.data\r\n}\r\n\r\nexport async function GetLeagues() {\r\n    let res = await axios.get(`${endPoint}/leagues/getleagues`)\r\n    return res.data\r\n}\r\n\r\nexport async function GetFixturesInLeague(leagueId) {\r\n    let res = await axios.post(`${endPoint}/fixtures/getfixtures`, { leagueId: leagueId, token: getToken() })\r\n    return res.data\r\n}\r\n\r\nexport async function GetFixturesInLeagueByName(name){\r\n    let res = await axios.post(`${endPoint}/fixtures/getfixturesfromname`, { leagueName: name, token: getToken() })\r\n    return res.data\r\n}\r\n\r\nexport async function GetFixtureDetails(fixtureId) {\r\n    let res = await axios.post(`${endPoint}/fixtures/getfixturedetails`, { fixtureId: fixtureId, token: getToken() })\r\n    return res.data\r\n}\r\n\r\nexport async function GetTeamMatches(team) {\r\n    let res = await axios.post(`${endPoint}/teams/getteammatches`, { team: team, token: getToken() })\r\n    return res.data\r\n}\r\n\r\nexport async function FollowUser(user) {\r\n    let res = await axios.post(`${endPoint}/auth/followuser`, { username: user, token: getToken() })\r\n    return res.data\r\n}\r\n\r\nexport async function FollowTag(tag, name, type, isAdded) {\r\n    let res = await axios.post(`${endPoint}/auth/followtag`, { tag: tag, name: name, type: type, isAdded: isAdded, token: getToken() })\r\n    return res.data\r\n}\r\n\r\nexport async function MakeComment(description, isChild, id) {\r\n    let res = await axios.post(`${endPoint}/comments/comment`, { description: description, isChild: isChild, id: id, token: getToken() })\r\n    return res.data\r\n}\r\n\r\nexport async function GetPostComments(postId) {\r\n    let res = await axios.post(`${endPoint}/comments/getpostcomments`, { id: postId })\r\n    return res.data\r\n}\r\n\r\nexport async function QuickSearch(term){\r\n    let res = await axios.post(`${endPoint}/search/quicksearch`, { term: term })\r\n    return res.data\r\n}\r\n\r\nexport async function PageSearch(term, tag){\r\n    let res = await axios.post(`${endPoint}/search/searchbypage`, { term: term, tag: tag })\r\n    return res.data\r\n}\r\n\r\nexport async function FlagPost(postId){\r\n    let res = await axios.post(`${endPoint}/posts/flagpost`, { token: getToken(), postId: postId })\r\n    return res.data\r\n}\r\n\r\nexport async function MuteUser(person, muteDuration){\r\n    let res = await axios.post(`${endPoint}/auth/muteuser`, { token: getToken(), person: person, muteDuration: muteDuration })\r\n    return res.data\r\n}\r\n\r\nexport async function BanUser(person){\r\n    let res = await axios.post(`${endPoint}/auth/banuser`, { token: getToken(), person: person})\r\n    return res.data\r\n}\r\n\r\nexport async function GetLogs(page){\r\n    let res = await axios.post(`${endPoint}/auth/getlogs`, { token: getToken(), page: page})\r\n    return res.data\r\n}\r\n\r\nexport async function RemoveLog(logId){\r\n    let res = await axios.post(`${endPoint}/auth/deletelog`, { token: getToken(), logId: logId})\r\n    return res.data\r\n}\r\n\r\nexport async function CheckIfPostExists(postId){\r\n    let res = await axios.post(`${endPoint}/posts/checkifpostavailable`, { token: getToken(), id: postId })\r\n    return res.data\r\n}\r\n\r\nexport async function PromoteToMod(user){\r\n    let res = await axios.post(`${endPoint}/auth/addmoderator`, { token: getToken(), person: user })\r\n    return res.data\r\n}\r\n\r\nexport async function DemoteToUser(user){\r\n    let res = await axios.post(`${endPoint}/auth/removemoderator`, { token: getToken(), person: user })\r\n    return res.data\r\n}","import React, {useState} from 'react'\r\n\r\nlet message = ''\r\nlet changeNotificationVisibility  = null\r\n\r\nexport function NotificationBar(){\r\n\r\n    const [visible, setVisibility] = useState(false)\r\n    changeNotificationVisibility = setVisibility\r\n\r\n    if(!visible)\r\n        return null\r\n\r\n    return(\r\n        <div id=\"notification-bar\">\r\n            <p className=\"description\">{message}</p>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport function showNotification(mssg, callback){\r\n    message = mssg\r\n    if(changeNotificationVisibility == null)\r\n        return\r\n\r\n    changeNotificationVisibility(true)\r\n    callback && callback()\r\n\r\n    setTimeout(() => {\r\n        message = \"\"\r\n        changeNotificationVisibility(false)        \r\n    }, 4000)\r\n}","import React, { useState, useRef, useEffect } from 'react'\r\nimport FitText from 'react-fittext'\r\n\r\nexport function Dropdown(props) {\r\n    const [contentClass, setContentClass] = useState('content')\r\n    const [title, setTitle] = useState(props.title)\r\n    const dropdown = useRef(null)\r\n\r\n    function documentClick(e){\r\n        if (dropdown.current && !dropdown.current.contains(e.target)) {\r\n            setContentClass('content')\r\n        }\r\n    }\r\n\r\n    useEffect(() => {\r\n        document.addEventListener('mousedown', documentClick)\r\n        return () => {\r\n            document.removeEventListener('mousedown', documentClick)\r\n        }\r\n    }, [contentClass])\r\n\r\n    return (\r\n        <div onClick={e => e.stopPropagation()} className=\"dropdown\" style={{width: props.expanded != null ? props.expanded : '100px',zIndex: props.zIndex != null ? props.zIndex : {}}} ref={dropdown}>\r\n            <div className=\"button\">\r\n                <div className=\"items\" onClick={() => { contentClass == 'content' ? setContentClass('content open') : setContentClass('content') }}>\r\n                    <p className=\"text\">{title}</p>\r\n                    <i className=\"trailing fas fa-caret-down\"></i>\r\n                </div>\r\n                <div className=\"shadow\"></div>\r\n                <div className={contentClass}>\r\n                    {\r\n                        props.choices.map(choice => <p onClick={() => {choice.action(setTitle); setContentClass('content')}} key={choice.name}>{choice.name}</p>)\r\n                    }\r\n                </div>\r\n            </div>\r\n\r\n        </div>\r\n    )\r\n}","import React, { useState, useEffect } from 'react'\r\nimport { Login, SubmitPost, MuteUser } from '../Communicator'\r\nimport { showNotification } from './NoticationBar'\r\nimport { User, Page } from '../Config'\r\nimport { isEmptyOrSpaces, validURL } from '../Utils'\r\nimport { Dropdown } from './Dropdown'\r\nimport FitText from 'react-fittext'\r\n\r\nlet modalSpecList = []\r\n\r\nfunction ModalSpec(modalName, modalFunc, additionalInfo) {\r\n    this.modalName = modalName\r\n    this.modalFunc = modalFunc\r\n    this.Run = (visibility) => { this.modalFunc(visibility) }\r\n    this.additionalInfo = additionalInfo\r\n}\r\n\r\nexport function LoginModal() {\r\n    const [username, setUsername] = useState('')\r\n    const [password, setPassword] = useState('')\r\n    const [user, setUser] = useState(null)\r\n    const [visible, setVisibility] = useState(false)\r\n\r\n    useEffect(() => {\r\n        modalSpecList.push(new ModalSpec(\"login\", setVisibility))\r\n    }, [])\r\n\r\n    if (!visible)\r\n        return null\r\n\r\n    return (\r\n        <div onClick={() => { setModalVisibility(\"login\", false) }} id=\"modal\">\r\n            <div className=\"login\" id=\"dialog\" onClick={(e) => { e.stopPropagation() }}>\r\n                <p className=\"title\">LOG-IN</p>\r\n                <p>Username:</p>\r\n                <input className=\"username\" onChange={(event) => { setUsername(event.target.value) }} type=\"text\"></input>\r\n                <p>Password:</p>\r\n                <input className=\"password\" onChange={(event) => { setPassword(event.target.value) }} type=\"password\"></input>\r\n                <div className=\"space\"></div>\r\n                <User.Consumer>{\r\n                    user => <div className=\"btn default\" onClick={async () => {\r\n\r\n                        let data = await Login(username, password)\r\n\r\n                        if (data.status === \"success\") {\r\n                            setModalVisibility(\"login\", false)\r\n                            let now = new Date()\r\n                            let time = now.getTime()\r\n                            time += 3600000\r\n                            now.setTime(time)\r\n                            document.cookie = `token=${data.data.token}; expires=${now.toUTCString()};`\r\n                            user.editUser({\r\n                                username: username,\r\n                                token: data.data.token,\r\n                                followingSports: data.data.followedSports,\r\n                                followingCompetitions: data.data.followedCompetitions,\r\n                                followingTeams: data.data.followedTeams,\r\n                                followers: data.data.followers,\r\n                                following: data.data.following,\r\n                                rank: data.data.rank,\r\n                                moderatedTags: data.data.moderatedTags\r\n                            })\r\n                        }\r\n\r\n\r\n                        showNotification(data.message)\r\n                    }}>\r\n                        LOGIN\r\n                </div>\r\n                }</User.Consumer>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport function FeedbackModal() {\r\n    const [text, setText] = useState('')\r\n    const [topic, setTopic] = useState(null)\r\n    const [visible, setVisibility] = useState(false)\r\n\r\n    useEffect(() => {\r\n        modalSpecList.push(new ModalSpec(\"feedback\", setVisibility))\r\n    }, [])\r\n\r\n    if (!visible)\r\n        return null\r\n\r\n    return (\r\n        <div onClick={(e) => { setModalVisibility(\"feedback\", false) }} id=\"modal\">\r\n            <div className=\"login\" id=\"dialog\" onClick={(e) => { e.stopPropagation() }}>\r\n                <p className=\"title\">FEEDBACK</p>\r\n                <p>SELECT QUESTION TYPE:</p>\r\n                <div style={{margin: \"10px 0px\"}}>                \r\n                <Dropdown title=\"Select...\" expanded={'200px'} choices={[\r\n                    { name: 'FEATURE SUGGESTION', action: (title) => {title('FEATURE SUGGESTION'); setTopic('feature_suggestion')} },\r\n                    { name: 'SITE PROBLEM', action: (title) => {title('SITE PROBLEM'); setTopic('site_problem')} },\r\n                    { name: 'QUESTION', action: (title) => {title('QUESTION'); setTopic('question')} },\r\n                ]}></Dropdown>\r\n                </div>\r\n                <p>MESSAGE:</p>\r\n                <input className=\"username\" onChange={(event) => { setText(event.target.value) }} type=\"text\"></input>\r\n                <div className=\"space\"></div>\r\n                <div className=\"btn default\" onClick={async () => {\r\n                    if(topic == null)\r\n                        return showNotification('Please select topic')\r\n                    //Send message\r\n                    showNotification('Message sent')\r\n                }}>\r\n                    SEND\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport function CreatePostModal() { //Hide main page when shown, or?\r\n\r\n    const [visible, setVisibility] = useState(false)\r\n    const [title, setTitle] = useState('')\r\n    const [body, setBody] = useState('') //SET VALIDATION\r\n    const [link, setLink] = useState('') //SET VALIDATION\r\n    const [selectedTab, changeSelectedTab] = useState(2)\r\n\r\n    useEffect(() => {\r\n        modalSpecList.push(new ModalSpec(\"createpost\", setVisibility))\r\n    }, [])\r\n\r\n    if (!visible)\r\n        return null\r\n\r\n    return (\r\n        <div id=\"create-post-dialog\">\r\n            <div className=\"create-post-container\">\r\n                <h2 className=\"title\">CREATE A POST</h2>\r\n                <div className=\"divider\"></div>\r\n                <div className=\"content-holder\">\r\n                    <div className=\"type-selector\">\r\n                        {/* <div className={`type ${selectedTab == 1 ? 'selected' : ''}`} onClick={() => { changeSelectedTab(1) }}>Text</div> */}\r\n                        {/* <div className={`type ${selectedTab == 2 ? 'selected' : ''}`} onClick={() => { changeSelectedTab(2) }}>Embed</div> */}\r\n                    </div>\r\n                    <p className=\"disclaimer\">\r\n                        Please enter a valid media URL from Facebook, Instagram, Youtube or any of the supported websites.\r\n                </p>\r\n                    <input placeholder=\"Enter title...\" onChange={(e) => { setTitle(e.target.value) }}></input>\r\n                    {\r\n                        selectedTab == 1 ? <textarea placeholder=\"Enter description...\" onChange={(e) => { setBody(e.target.value) }}></textarea> :\r\n                            <input className=\"link\" placeholder=\"Enter link...\" onChange={(e) => { setLink(e.target.value) }}></input>\r\n                    }\r\n                    <div className=\"row\">\r\n                        <Page.Consumer>\r\n                            {page =>\r\n                                <div className=\"button fixed\" onClick={() => { submitPost(title, body, page.tags, selectedTab == 2 ? true : false, link) }}>\r\n                                    <div className=\"items\">\r\n                                        <p className=\"text\">POST</p>\r\n                                    </div>\r\n                                    <div className=\"shadow\"></div>\r\n                                </div>\r\n                            }\r\n                        </Page.Consumer>\r\n                        <div className=\"button fixed\" onClick={() => { setVisibility(false) }}>\r\n                            <div className=\"items\">\r\n                                <p className=\"text\">CANCEL</p>\r\n                            </div>\r\n                            <div className=\"shadow\"></div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport function MuteUserModal() {\r\n    const [visible, setVisibility] = useState(false)\r\n    const [hours, setHours] = useState(0)\r\n    const [minutes, setMinutes] = useState(0)\r\n\r\n    useEffect(() => {\r\n        modalSpecList.push(new ModalSpec(\"muteuser\", setVisibility))\r\n    }, [])\r\n\r\n    if (!visible)\r\n        return null\r\n\r\n    function convertTime(hours, minutes) {\r\n        return (hours * 3600000) + (minutes * 60000)\r\n    }\r\n\r\n    return (\r\n        <div onClick={() => { setModalVisibility(\"muteuser\", false) }} id=\"modal\">\r\n            <div id=\"mute-user-modal\">\r\n                <div id=\"modal\">\r\n                    <div id=\"dialog\" onClick={e => e.stopPropagation()}>\r\n                        <p>Please enter the duration for which you would like to mute this user:</p>\r\n                        <div style={{ marginTop: '10px' }}>\r\n                            <p>Hours:</p>\r\n                            <input onChange={(e) => { setHours(parseInt(e.target.value)) }} defaultValue={0} type=\"number\"></input>\r\n                            <p>Minutes:</p>\r\n                            <input onChange={(e) => { setMinutes(parseInt(e.target.value)) }} defaultValue={0} type=\"number\"></input>\r\n                        </div>\r\n                        <div style={{ marginTop: '15px' }} className=\"btn default\" onClick={async () => {\r\n                            if (isNaN(hours) || isNaN(minutes))\r\n                                return\r\n\r\n                            MuteUser(modalSpecList.find(item => item.modalName == \"muteuser\").additionalInfo, convertTime())\r\n                            setModalVisibility(\"muteuser\", false)\r\n                        }}>MUTE</div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\n//\r\nasync function submitPost(title, body, tags, isEmbed, link) {\r\n\r\n    if (!checkLink(link)) {\r\n        showNotification('Enter a valid address')\r\n        return\r\n    }\r\n\r\n    let data = await SubmitPost(title, body, tags, isEmbed, link, Date.now())\r\n\r\n    if (data.status === \"success\")\r\n        showNotification('Posted successfully')\r\n\r\n    setModalVisibility(\"createpost\", false)\r\n}\r\n\r\nfunction checkLink(link) {\r\n    if (isEmptyOrSpaces(link))\r\n        return false\r\n\r\n    if (!link.includes('facebook') && !link.includes('instagram') && !link.includes('twitter') && !link.includes('youtube'))\r\n        return false\r\n\r\n    if (!validURL(link))\r\n        return false\r\n\r\n    return true\r\n}\r\n\r\nexport function setModalVisibility(name, visibility, additionalInfo = {}) {\r\n    let spec = modalSpecList.find(item => item.modalName == name)\r\n    spec.additionalInfo = additionalInfo\r\n    spec.Run(visibility)\r\n}\r\n","import React, {useState} from 'react'\r\n\r\nlet changeVisibility\r\n\r\nexport function LoadScreen(){\r\n\r\n    const [visibility, setVisibility] = useState(false)\r\n    changeVisibility = setVisibility\r\n\r\n    if(!visibility)\r\n        return null\r\n\r\n    return(\r\n        <div id=\"load-screen\">\r\n            <p>Loading...</p>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport function setLoadScreen(isOn){\r\n    changeVisibility(isOn)\r\n}","import React, { useState } from 'react'\r\nimport { GetLeagues, GetTeams, Register } from '../Communicator'\r\nimport { setLoadScreen } from './LoadDialog'\r\nimport { showNotification } from './NoticationBar'\r\nimport Recaptcha from 'react-google-recaptcha'\r\n\r\nlet selectedItems = {\r\n    sports: new Set(),\r\n    competitions: new Set(),\r\n    teams: new Set()\r\n}\r\n\r\nlet username = ''\r\nlet password = ''\r\nlet confirmPass = ''\r\n\r\nlet changeVisibility = null\r\n\r\nexport function RegisterPage() {\r\n\r\n    const [visible, setVisibility] = useState(false)\r\n    const [page, setPage] = useState(0)\r\n    const [leagues, setLeagues] = useState([])\r\n    const [teams, setTeams] = useState([])\r\n\r\n    changeVisibility = setVisibility\r\n\r\n    if (!visible) {\r\n        selectedItems = {\r\n            sports: new Set(),\r\n            competitions: new Set(),\r\n            teams: new Set()\r\n        }\r\n\r\n        username = ''\r\n        password = ''\r\n        confirmPass = ''\r\n\r\n        return null\r\n    }\r\n\r\n    async function sportsPageOnClick() {\r\n        setLoadScreen(true)\r\n        let leagues = await GetLeagues()\r\n        setLeagues(leagues.data.leagues.map(league => league.name))\r\n        setLoadScreen(false)\r\n\r\n        setPage(2)\r\n    }\r\n\r\n    async function competitionPageOnClick() {\r\n        setLoadScreen(true)\r\n        let teams = await GetTeams()\r\n        let set = new Set(teams.data.teams.map(team => team.name))\r\n        setTeams(Array.from(set))\r\n        setLoadScreen(false)\r\n\r\n        setPage(3)\r\n    }\r\n\r\n    async function teamPageOnClick() {\r\n        let sports = Array.from(selectedItems.sports)\r\n        let competitions = Array.from(selectedItems.competitions)\r\n        let teams = Array.from(selectedItems.teams)\r\n\r\n        teams = teams.map(item => [`${item}_team_result`, item])\r\n        competitions = competitions.map(item => [`${item}_competition_result`, item])\r\n\r\n        let itemsToArray = {\r\n            sports: sports,\r\n            competitions: competitions,\r\n            teams: teams\r\n        }\r\n\r\n        let result = await Register(username, password, itemsToArray)\r\n\r\n        if (result.status == \"success\") {\r\n            showNotification('Account created')\r\n            setVisibility(false)\r\n        } else {\r\n            showNotification(result.message)\r\n            setVisibility(false)\r\n        }\r\n\r\n        setPage(0)\r\n    }\r\n\r\n    return (\r\n        <div id=\"register-page-holder\">\r\n            <div id=\"register-page\">\r\n                <div className=\"header\">\r\n                    <i className=\"exit fas fa-times-circle\" onClick={() => { setVisibility(false); setPage(0) }}></i>\r\n                    <p>REGISTER</p>\r\n                </div>\r\n                <div className=\"body\">\r\n                    <InitialPage setPage={setPage} enabled={page == 0 ? true : false}></InitialPage>\r\n                    <Page items={['Soccer']} clicked={sportsPageOnClick} setPage={setPage} type={'sports'} enabled={page == 1 ? true : false}></Page>\r\n                    <Page items={leagues} clicked={competitionPageOnClick} setPage={setPage} type={'competitions'} enabled={page == 2 ? true : false}></Page>\r\n                    <Page items={teams} clicked={teamPageOnClick} setPage={setPage} type={'teams'} enabled={page == 3 ? true : false}></Page>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nfunction InitialPage(props) {\r\n\r\n    const [captchaPassed, setCaptchaPassed] = useState(false)\r\n\r\n    if (!props.enabled)\r\n        return null\r\n\r\n    async function click() {\r\n        if (isEmptyOrSpaces(username)) {\r\n            showNotification('Please enter username')\r\n            return\r\n        }\r\n\r\n        if (isEmptyOrSpaces(password) || isEmptyOrSpaces(confirmPass)) {\r\n            showNotification('Please enter password')\r\n            return\r\n        }\r\n\r\n        if (password != confirmPass) {\r\n            showNotification('Passwords do not match')\r\n            return\r\n        }\r\n\r\n        if (password.length < 3) {\r\n            showNotification('Password length must be more than 3 letters')\r\n            return\r\n        }\r\n\r\n        props.setPage(1)\r\n    }\r\n\r\n    return (\r\n        <div id=\"register-initial\">\r\n            <p className=\"\">Username:</p>\r\n            <input onChange={(e) => { username = e.target.value }}></input>\r\n            <p className=\"\">Password:</p>\r\n            <input onChange={(e) => { password = e.target.value }} type=\"password\"></input>\r\n            <p className=\"\">Retype password:</p>\r\n            <input onChange={(e) => { confirmPass = e.target.value }} type=\"password\"></input>\r\n            <div className=\"space\"></div>\r\n            <Recaptcha sitekey=\"6LdpI8QZAAAAAP0RaC5gvSJTzpL-35bSqSQZVMGk\" onChange={() => { setCaptchaPassed(true) }}>\r\n\r\n            </Recaptcha>\r\n            {\r\n                !captchaPassed ? <></> : <div className=\"button gap\" onClick={() => { click() }}>\r\n                    <div className=\"items\">\r\n                        <div className=\"leading\">\r\n                            <p className=\"text\">NEXT</p>\r\n                        </div>\r\n                        <i className=\"trailing fas fa-arrow-right\"></i>\r\n                    </div>\r\n                    <div className=\"shadow\"></div>\r\n                </div>\r\n            }\r\n        </div>\r\n    )\r\n}\r\n\r\nfunction Page(props) {\r\n\r\n    if (!props.enabled)\r\n        return null\r\n\r\n    return (\r\n        <div id=\"register-sports\">\r\n            <p>Select your favorite {props.type}:</p>\r\n            <div className=\"panel\">\r\n                <div className=\"items\">\r\n                    <TileHolder type={props.type} items={props.items}></TileHolder>\r\n                </div>\r\n            </div>\r\n            <div className=\"button gap\" onClick={() => { props.clicked() }}>\r\n                <div className=\"items\">\r\n                    <div className=\"leading\">\r\n                        <p className=\"text\">NEXT</p>\r\n                    </div>\r\n                    <i className=\"trailing fas fa-arrow-right\"></i>\r\n                </div>\r\n                <div className=\"shadow\"></div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nfunction TileHolder(props) {\r\n    return (\r\n        props.items.map(item => <Tile type={props.type} key={item} title={item}></Tile>)\r\n    )\r\n}\r\n\r\nfunction Tile(props) {\r\n\r\n    const [style, setStyle] = useState('')\r\n\r\n    function onClick() {\r\n        style == '' ? setStyle('invert') : setStyle('')\r\n        style == '' ? selectedItems[props.type].add(props.title) : selectedItems[props.type].delete(props.title)\r\n    }\r\n\r\n    return (\r\n        <div className={`tile ${style}`} onClick={() => { onClick() }}>\r\n            <div className={`dot ${style}`}></div>\r\n            {/* <div className=\"divider\"></div> */}\r\n            <p className=\"name\">{props.title}</p>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport function enablePage() {\r\n    changeVisibility(true)\r\n}\r\n\r\nfunction isEmptyOrSpaces(str) {\r\n    return str === null || str.match(/^ *$/) !== null;\r\n}","import React, { useEffect, useState } from 'react'\r\nimport { setLoadScreen } from './LoadDialog'\r\nimport { GetPostsByUser, GetUserInfo, FollowUser, PromoteToMod, DemoteToUser } from '../Communicator'\r\nimport { User } from '../Config'\r\nimport { showNotification } from './NoticationBar'\r\n\r\nlet changeVisibility = null\r\nlet changePosts = null\r\nlet changeUserInfo = null\r\nlet currentUser = null\r\n\r\nexport function Profile() { //Should not be used anymore\r\n    const [visibility, setVisibility] = useState(false)\r\n    const [posts, setPosts] = useState([])\r\n    const [userInfo, setUserInfo] = useState({})\r\n\r\n    useEffect(() => {\r\n        changePosts = setPosts\r\n        changeVisibility = setVisibility\r\n        changeUserInfo = setUserInfo\r\n    }, [])\r\n\r\n    if (!visibility)\r\n        return null\r\n\r\n    return (\r\n        <div className=\"user-profile\">\r\n            <div className=\"header\">\r\n                <i className=\"exit fas fa-times-circle\" onClick={() => { setVisibility(false) }}></i>\r\n                <p>{currentUser}</p>\r\n            </div>\r\n            <div className=\"stats\">\r\n                <div className=\"followers card\">\r\n                    <i className=\"icon fas fa-user-friends\"></i>\r\n                    <p className=\"title\">Followers</p>\r\n                    <p className=\"value\">{userInfo.followers ? userInfo.followers.length : 0}</p>\r\n                    <div className=\"shadow\"></div>\r\n                </div>\r\n                <div className=\"likes card\">\r\n                    <i className=\"icon fas fa-thumbs-up\"></i>\r\n                    <p className=\"title\">Likes</p>\r\n                    <p className=\"value\">{userInfo.totalVotes ? userInfo.totalVotes : 0}</p>\r\n                    <div className=\"shadow\"></div>\r\n                </div>\r\n                <div className=\"date card\">\r\n                    <i className=\"icon fas fa-calendar-alt\"></i>\r\n                    <p className=\"title\">Joined</p>\r\n                    <p className=\"value\">{userInfo.dateJoined}</p>\r\n                    <div className=\"shadow\"></div>\r\n                </div>\r\n            </div>\r\n            <div className=\"divider\"></div>\r\n            <div className=\"social\">\r\n                <SocialLink logo=\"fab fa-instagram\" name=\"Instagram: \"></SocialLink>\r\n                <SocialLink logo=\"fab fa-youtube\" name=\"Youtube: \"></SocialLink>\r\n                <SocialLink logo=\"fab fa-twitter\" name=\"Twitter: \"></SocialLink>\r\n                <SocialLink logo=\"fab fa-facebook\" name=\"Facebook: \"></SocialLink>\r\n                <SocialLink logo=\"fab fa-reddit\" name=\"Reddit: \"></SocialLink>\r\n                <SocialLink logo=\"fab fa-pinterest\" name=\"Pinterest: \"></SocialLink>\r\n            </div>\r\n            <div className=\"divider\"></div>\r\n            <div className=\"follow-btn\" onClick={async () => {\r\n                let result = await FollowUser(currentUser)\r\n                if (result.status == 'failure')\r\n                    return\r\n\r\n                let updatedInfo = userInfo\r\n                updatedInfo.followers.push(currentUser) //should add this user\r\n                setUserInfo({ ...updatedInfo })\r\n            }}>\r\n                <p>FOLLOW</p>\r\n            </div>\r\n            <div className=\"divider\"></div>\r\n            <p className=\"post-title\">POSTS</p>\r\n            {\r\n                posts.map(post => <ProfilePost key={post._id} title={post.title} body={post.body} tags={post.tags} votes={post.votes[0].votes}></ProfilePost>)\r\n            }\r\n        </div>\r\n    )\r\n}\r\n\r\nexport function ProfileDesktop(props) {\r\n    let username = props.username\r\n\r\n    const [userInfo, setUserInfo] = useState({})\r\n\r\n    useEffect(() => {\r\n        (() => {\r\n            setLoadScreen(true)\r\n            let postsPromise = GetPostsByUser(currentUser) \r\n            let userPromise = GetUserInfo(username)\r\n\r\n            Promise.allSettled([postsPromise, userPromise])\r\n                .then(results => {\r\n                    let posts = results[0].value\r\n                    let user = results[1].value\r\n\r\n                    if (posts.status == 'failure' || user.status == 'failure')\r\n                        return console.log('Failed')\r\n\r\n                    //posts = post.data\r\n                    setUserInfo(user.data)\r\n                    setLoadScreen(false)\r\n                })\r\n        })()\r\n    }, [])\r\n\r\n    return (\r\n        <div className=\"user-profile desktop\">\r\n            <div className=\"header\">\r\n                <p>{username}</p>\r\n            </div>\r\n            <div className=\"stats\">\r\n                <div className=\"followers card\">\r\n                    <i className=\"icon fas fa-user-friends\"></i>\r\n                    <p className=\"title\">Followers</p>\r\n                    <p className=\"value\">{userInfo.followers ? userInfo.followers.length : 0}</p>\r\n                    {/* <div className=\"shadow\"></div> */}\r\n                </div>\r\n                <div className=\"likes card\">\r\n                    <i className=\"icon fas fa-thumbs-up\"></i>\r\n                    <p className=\"title\">Likes</p>\r\n                    <p className=\"value\">{userInfo.totalVotes ? userInfo.totalVotes : 0}</p>\r\n                    {/* <div className=\"shadow\"></div> */}\r\n                </div>\r\n                <div className=\"date card\">\r\n                    <i className=\"icon fas fa-calendar-alt\"></i>\r\n                    <p className=\"title\">Joined</p>\r\n                    <p className=\"value\">{userInfo.dateJoined}</p>\r\n                    {/* <div className=\"shadow\"></div> */}\r\n                </div>\r\n            </div>\r\n            <div className=\"divider\"></div>\r\n            <div className=\"social\">\r\n                <SocialLink logo=\"fab fa-instagram\" name=\"Instagram: \"></SocialLink>\r\n                <SocialLink logo=\"fab fa-youtube\" name=\"Youtube: \"></SocialLink>\r\n                <SocialLink logo=\"fab fa-twitter\" name=\"Twitter: \"></SocialLink>\r\n                <SocialLink logo=\"fab fa-facebook\" name=\"Facebook: \"></SocialLink>\r\n                <SocialLink logo=\"fab fa-reddit\" name=\"Reddit: \"></SocialLink>\r\n                <SocialLink logo=\"fab fa-pinterest\" name=\"Pinterest: \"></SocialLink>\r\n            </div>\r\n            <div className=\"divider\"></div>\r\n            <User.Consumer>{\r\n                user => <><div className=\"profile-btn\" onClick={async () => {\r\n                    let result = await FollowUser(username)\r\n                    if (result.status == 'failure')\r\n                        return showNotification(result.message)\r\n\r\n                    if (result.message == 'followed') {\r\n                        let updatedInfo = userInfo\r\n                        updatedInfo.following.push(username)\r\n                        user.addFollowing(username)\r\n                        setUserInfo({ ...updatedInfo })\r\n                    } else {\r\n                        let updatedInfo = userInfo\r\n                        updatedInfo.following = updatedInfo.following.filter(i => i != username)\r\n                        user.removeFollowing(username)\r\n                        setUserInfo({ ...updatedInfo })\r\n                    }\r\n                }}>\r\n                    <p>{userInfo.following && user.following && user.following.includes(username) ? 'UNFOLLOW' : 'FOLLOW'}</p>\r\n                </div>\r\n                    {\r\n                        user.rank != \"\"  && user.rank != \"user\" && user.username != username && userInfo.rank == \"user\" ? <div className=\"profile-btn\" onClick={async () => {\r\n                            let res = await PromoteToMod(username)\r\n                            if(res.status == 'success')\r\n                                setUserInfo(state => ({...state, rank: 'mod'}))\r\n                        }}>\r\n                            <p>PROMOTE TO MOD</p>\r\n                        </div> : <></>\r\n                    }\r\n                    {\r\n                        user.rank != \"\" && user.rank != \"user\" && user.username != username && userInfo.rank == \"mod\" ? <div className=\"profile-btn\" onClick={async () => {\r\n                            let res = await DemoteToUser(username)\r\n                            if(res.status == 'success')\r\n                                setUserInfo(state => ({...state, rank: 'user'}))\r\n                        }}>\r\n                            <p>DEMOTE TO USER</p>\r\n                        </div> : <></>\r\n                    }\r\n                </>\r\n            }\r\n            </User.Consumer>\r\n        </div>\r\n    )\r\n}\r\n\r\nfunction SocialLink(props) {\r\n    return (\r\n        <div className=\"social-tile\">\r\n            <i className={props.logo}></i>\r\n            <p>{props.name}</p>\r\n            <User.Consumer>\r\n                {\r\n                    user => currentUser == user.username ?\r\n                        <i className=\"fas fa-edit\"></i> :\r\n                        <></>\r\n                }\r\n            </User.Consumer>\r\n        </div>\r\n    )\r\n}\r\n\r\nfunction ProfilePost(props) {\r\n\r\n    return (\r\n        <div className=\"profile-post\">\r\n            <div className=\"main\">\r\n                <p className=\"title\">{props.title}</p>\r\n                {/* <div className=\"tags\">\r\n                    {\r\n                        props.tags.map(tag => <p key={tag}>{tag}</p>)\r\n                    }\r\n                </div> */}\r\n                <p className=\"body\">{props.body}</p>\r\n            </div>\r\n            <div className=\"votes\">{props.votes}</div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport async function openUserProfile(visibility, username) {\r\n    currentUser = username\r\n    setLoadScreen(true)\r\n    let postsPromise = GetPostsByUser(currentUser)\r\n    let userPromise = GetUserInfo(username)\r\n\r\n    Promise.allSettled([postsPromise, userPromise])\r\n        .then(results => {\r\n            let posts = results[0].value\r\n            let user = results[1].value\r\n\r\n            if (posts.status == 'failure' || user.status == 'failure')\r\n                return console.log('Failed')\r\n\r\n            changePosts(posts.data)\r\n            changeUserInfo(user.data)\r\n            changeVisibility(visibility)\r\n            setLoadScreen(false)\r\n        })\r\n\r\n\r\n}","import React, { useState, useEffect } from 'react'\r\nimport background from '../media/content-background.jpg'\r\nimport { GetFixtureDetails } from '../Communicator'\r\n\r\nlet changeVisibility\r\nlet currentMatch\r\n\r\nfunction ContentPage(props) {\r\n\r\n    //const [visible, setVisibility] = useState(false)\r\n    const [fixtureDetails, setFixtureDetails] = useState({})\r\n    //changeVisibility = setVisibility\r\n\r\n    useEffect(() => {\r\n        if (!props.isActivated)\r\n            return\r\n\r\n        async function GetDetails() {\r\n            let res = await GetFixtureDetails(currentMatch.fixture_id)\r\n            console.log(res.data)\r\n            setFixtureDetails(res.data)\r\n        }\r\n\r\n        GetDetails()\r\n    }, [props.isActivated])\r\n\r\n    if (!props.isActivated)\r\n        return null\r\n\r\n    let date = new Date(Date.parse(currentMatch.event_date))\r\n\r\n    return (\r\n        <div id=\"content-page\">\r\n            <div id=\"content-header\">\r\n                <img src={background} alt='back' />\r\n                <div className=\"filter\"></div>\r\n                <div className=\"header-content\">\r\n                    {/* <i onClick={() => { }} className=\"back fas fa-arrow-circle-left\"></i> */}\r\n                    <p className=\"date\">{date.toLocaleDateString()}</p>\r\n                    <p className=\"league\">{currentMatch.league.name}</p>\r\n                    <div className=\"gap\"></div>\r\n                    <div className=\"score-front\">\r\n                        <p className=\"team\">{currentMatch.homeTeam.team_name}</p>\r\n                        <div className=\"score-display\">\r\n                            <p className=\"num\">{currentMatch.goalsHomeTeam}</p>\r\n                        </div>\r\n                        <div className=\"score-display\">\r\n                            <p className=\"num\">{currentMatch.goalsAwayTeam}</p>\r\n                        </div>\r\n                        <p className=\"team\">{currentMatch.awayTeam.team_name}</p>\r\n                    </div>\r\n                    <p className=\"location\">{currentMatch.venue}</p>\r\n                    <p className=\"ht-score\">{`HT Score: ${currentMatch.score == null || currentMatch.score.halftime == null ? '-' : currentMatch.score.halftime}`}</p>\r\n                </div>\r\n\r\n            </div>\r\n            <div id=\"content-body\">\r\n                <MatchAttribute title=\"SCORE\" team1={currentMatch.homeTeam.team_name} value1={currentMatch.goalsHomeTeam} team2={currentMatch.awayTeam.team_name} value2={currentMatch.goalsAwayTeam}></MatchAttribute>\r\n                <MatchAttribute title=\"POSSESSION\" team1={currentMatch.homeTeam.team_name} value1={fixtureDetails[\"Ball Possession\"] === undefined ? '-' : fixtureDetails[\"Ball Possession\"].home} team2={currentMatch.awayTeam.team_name} value2={fixtureDetails[\"Ball Possession\"] === undefined ? '-' : fixtureDetails[\"Ball Possession\"].away}></MatchAttribute>\r\n                <MatchAttribute title=\"SHOTS ON TARGET\" team1={currentMatch.homeTeam.team_name} value1={fixtureDetails[\"Shots on Goal\"] === undefined ? '-' : fixtureDetails[\"Shots on Goal\"].home} team2={currentMatch.awayTeam.team_name} value2={fixtureDetails[\"Shots on Goal\"] === undefined ? '-' : fixtureDetails[\"Shots on Goal\"].away}></MatchAttribute>\r\n                <MatchAttribute title=\"SHOTS OFF TARGET\" team1={currentMatch.homeTeam.team_name} value1={fixtureDetails[\"Shots off Goal\"] === undefined ? '-' : fixtureDetails[\"Shots off Goal\"].home} team2={currentMatch.awayTeam.team_name} value2={fixtureDetails[\"Shots off Goal\"] === undefined ? '-' : fixtureDetails[\"Shots off Goal\"].away}></MatchAttribute>\r\n                <MatchAttribute title=\"CORNERS\" team1={currentMatch.homeTeam.team_name} value1={fixtureDetails[\"Corner Kicks\"] === undefined ? '-' : fixtureDetails[\"Corner Kicks\"].home} team2={currentMatch.awayTeam.team_name} value2={fixtureDetails[\"Corner Kicks\"] === undefined ? '-' : fixtureDetails[\"Corner Kicks\"].away}></MatchAttribute>\r\n                <MatchAttribute title=\"OFFSIDES\" team1={currentMatch.homeTeam.team_name} value1={fixtureDetails[\"Offsides\"] === undefined ? '-' : fixtureDetails[\"Offsides\"].home} team2={currentMatch.awayTeam.team_name} value2={fixtureDetails[\"Offsides\"] === undefined ? '-' : fixtureDetails[\"Offsides\"].away}></MatchAttribute>\r\n                <MatchAttribute title=\"FOULS\" team1={currentMatch.homeTeam.team_name} value1={fixtureDetails[\"Fouls\"] === undefined ? '-' : fixtureDetails[\"Fouls\"].home} team2={currentMatch.awayTeam.team_name} value2={fixtureDetails[\"Fouls\"] === undefined ? '-' : fixtureDetails[\"Fouls\"].away}></MatchAttribute>\r\n                <MatchAttribute title=\"RED CARDS\" team1={currentMatch.homeTeam.team_name} value1={fixtureDetails[\"Red Cards\"] === undefined ? '-' : fixtureDetails[\"Red Cards\"].home} team2={currentMatch.awayTeam.team_name} value2={fixtureDetails[\"Red Cards\"] === undefined ? '-' : fixtureDetails[\"Red Cards\"].away}></MatchAttribute>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nfunction MatchAttribute(props) {\r\n    return (\r\n        <div className=\"match-attribute\">\r\n            <p className=\"title\">{props.title}</p>\r\n            <div className=\"attribute\">\r\n                <div className=\"row\">\r\n                    <p className=\"name\">{props.team1}</p>\r\n                    <p className=\"score\">{props.value1}</p>\r\n                </div>\r\n                <div className=\"divider\"></div>\r\n                <div className=\"row\">\r\n                    <p className=\"name\">{props.team2}</p>\r\n                    <p className=\"score\">{props.value2}</p>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport function ShowContentPage(visibility, _currentMatch) { //remove visibility\r\n    currentMatch = _currentMatch\r\n}\r\n\r\nexport function GetCurrentMatch(){\r\n    return currentMatch\r\n}\r\n\r\nexport default ContentPage","/* eslint-disable eqeqeq */\r\nimport React, { useEffect, useState, useContext } from 'react'\r\nimport { GetTeams, GetLeagues, GetFixturesInLeague, GetTeamMatches, GetFixturesInLeagueByName, GetPostsByUser } from '../Communicator'\r\nimport { showNotification } from './NoticationBar'\r\nimport { ShowContentPage } from './ContentPage'\r\nimport ContentPage from '../components/ContentPage'\r\nimport { Page } from '../Config'\r\nimport { setLoadScreen } from './LoadDialog'\r\nimport { ProfileDesktop } from './Profile'\r\nimport '../../node_modules/flagpack/dist/flagpack.css'\r\n\r\nlet updateFixtures\r\nlet updateTab\r\nlet changeContentPage\r\nlet currentMatch\r\n\r\nlet profileUsername = ''\r\n\r\nlet backButtonListenerStack = []\r\n\r\nexport function addToBackButtonStack(count, page, level, fixture = null) {\r\n    backButtonListenerStack.length = 0\r\n    if(fixture != null)\r\n        currentMatch = fixture\r\n\r\n    if (level == 1) {\r\n        changeContentPage(false)\r\n\r\n        for (let i = 0; i < count; i++) {\r\n            // eslint-disable-next-line no-loop-func\r\n            backButtonListenerStack.push(() => {\r\n                let lastTab = page.tags[page.tags.length - 1]\r\n                page.popPage(lastTab)\r\n                updateTab(page.tags[page.tags.length - 1])\r\n            })\r\n        }\r\n    }\r\n    else if (level == 2) {\r\n        ShowContentPage(true, fixture)\r\n        changeContentPage(true)\r\n\r\n        for (let i = 0; i < count; i++) {\r\n            // eslint-disable-next-line no-loop-func\r\n            backButtonListenerStack.push(() => {\r\n                changeContentPage(false)\r\n                let lastTab = page.tags[page.tags.length - 1]\r\n                page.popPage(lastTab)\r\n                updateTab(lastTab)\r\n            })\r\n        }\r\n    }\r\n\r\n}\r\n\r\nexport function showUserProfile(username, page) {\r\n    profileUsername = username\r\n\r\n    let lastTab = page.tags[page.tags.length - 1]\r\n\r\n    updateTab(`${username}_user_profile`)\r\n    page.setPage([`${username}_user_profile`])\r\n\r\n    backButtonListenerStack.push(() => {\r\n        page.popPage(lastTab)\r\n        updateTab(page.tags[page.tags.length - 1])\r\n    })\r\n}\r\n\r\nfunction RightMenu(props) {\r\n\r\n    const [teams, setTeams] = useState([])\r\n    const [leagues, setLeagues] = useState([])\r\n    const [tab, setTab] = useState('home') //Redacted - Used to rerender when popPage is run as popPage doesnt initiate rerender for some reason\r\n    const [fixtureTab, selectFixtureTab] = useState(1)\r\n    const [fixtures, setFixtures] = useState([])\r\n    const [isContentPageVisible, setContentPageVisibility] = useState(false)\r\n\r\n    useEffect(() => {\r\n        async function getData() {\r\n            let res_team = await GetTeams()\r\n            let res_league = await GetLeagues()\r\n\r\n            if (res_team.status === \"failure\" || res_league.status === \"failure\")\r\n                return console.log(\"Error occured while retrieving leagues/teams\")\r\n\r\n            setTeams(res_team.data.teams)\r\n            setLeagues(res_league.data.leagues)\r\n        }\r\n\r\n        updateFixtures = setFixtures\r\n        updateTab = setTab\r\n        changeContentPage = setContentPageVisibility\r\n        getData()\r\n    }, [])\r\n\r\n    // if (!props.activated)\r\n    //     return null\r\n\r\n    function fixtureTabClicked(tabNumber, team, previousTab, page) {\r\n        selectFixtureTab(tabNumber)\r\n\r\n        if (tabNumber == 1) {\r\n            if (page.tags[page.tags.length - 1].includes('_selected_tab')) {\r\n                page.popPage(page.tags[page.tags.length - 1])\r\n            }\r\n\r\n            page.setPage([team])\r\n            updateTab(team)\r\n        } else {\r\n\r\n            if (page.tags[page.tags.length - 1].includes('_selected_tab')) {\r\n                page.popPage(page.tags[page.tags.length - 1])\r\n            }\r\n\r\n            page.setPage([`${team}_selected_tab`])\r\n            updateTab(`${team}_selected_tab`)\r\n        }\r\n    }\r\n\r\n    return (\r\n        <Page.Consumer>\r\n            {page =>\r\n                <div>\r\n                    <div className=\"rightmenu\" style={{ display: props.activated ? 'flex' : 'none' }}>\r\n                        <RightMenuContent page={page}\r\n                            setContentPageVisibility={setContentPageVisibility}\r\n                            fixtureTabClicked={fixtureTabClicked}\r\n                            tab={tab}\r\n                            setTab={setTab}\r\n                            fixtureTab={fixtureTab}\r\n                            isContentPageVisible={isContentPageVisible}\r\n                            fixtures={fixtures}\r\n                            teams={teams}\r\n                            leagues={leagues} ></RightMenuContent>\r\n                    </div>\r\n                    <div className=\"rightmenu desktop\">\r\n                        <RightMenuContent page={page}\r\n                            setContentPageVisibility={setContentPageVisibility}\r\n                            fixtureTabClicked={fixtureTabClicked}\r\n                            tab={tab}\r\n                            setTab={setTab}\r\n                            fixtureTab={fixtureTab}\r\n                            selectFixtureTab={selectFixtureTab}\r\n                            isContentPageVisible={isContentPageVisible}\r\n                            fixtures={fixtures}\r\n                            teams={teams}\r\n                            leagues={leagues} ></RightMenuContent>\r\n                    </div>\r\n                </div>\r\n            }\r\n        </Page.Consumer>\r\n    )\r\n}\r\n\r\nfunction RightMenuContent({ page, setContentPageVisibility, selectFixtureTab, fixtureTabClicked, tab, setTab, fixtureTab, isContentPageVisible, fixtures, teams, leagues }) {\r\n    return (<>\r\n        {page.currentTags[page.currentTags.length - 1] === 'home' ? <div></div> : <div id=\"back-btn\" onClick={() => { backButtonListenerStack.pop()() }} className=\"button fixed\">\r\n            <p> BACK </p>\r\n        </div>}\r\n        <div id=\"navigation-container\">\r\n            <Tabs setContent={setContentPageVisibility} tab={tab} setTab={setTab} page={page}></Tabs>\r\n            <div id=\"navigation-body\">\r\n                {page.currentTags[page.currentTags.length - 1].includes('_fixture_details') || page.currentTags[page.currentTags.length - 1].includes('_selected_tab') ? <div className=\"team-selector\">\r\n                    <p onClick={() => fixtureTabClicked(0, `${currentMatch.homeTeam.team_name}`, tab, page)} className={fixtureTab == 0 ? 'selected' : ''}>{`${currentMatch.homeTeam.team_name}`}</p>\r\n                    <p onClick={() => fixtureTabClicked(1, `${currentMatch.fixture_id}_fixture_details`, tab, page)} className={fixtureTab == 1 ? 'selected' : ''}>Both</p>\r\n                    <p onClick={() => fixtureTabClicked(2, `${currentMatch.awayTeam.team_name}`, tab, page)} className={fixtureTab == 2 ? 'selected' : ''}>{`${currentMatch.awayTeam.team_name}`}</p>\r\n                </div> : <></>}\r\n                <ContentPage isActivated={isContentPageVisible}></ContentPage>\r\n                <NavigationBody selectFixtureTab={selectFixtureTab} setContent={setContentPageVisibility} page={page} fixtures={fixtures} tab={tab} teams={teams} leagues={leagues}></NavigationBody>\r\n            </div>\r\n        </div>\r\n    </>)\r\n}\r\n\r\nfunction tabClick(tab, setTab, page, name) {\r\n    if (tab === name)\r\n        return\r\n\r\n    let lastTab = page.tags[page.tags.length - 1]\r\n    page.popPage(lastTab)\r\n    setTab(name)\r\n    page.setPage([name])\r\n}\r\n\r\nfunction Tabs(props) {\r\n    let tab = props.page.currentTags[props.page.currentTags.length - 1]\r\n    let setTab = props.setTab //Redacted\r\n    let page = props.page\r\n    let setContent = props.setContent\r\n\r\n    if (tab === 'home') {\r\n        return (<></>)\r\n    }\r\n    else if (tab === 'competition' || tab === 'team' || tab === 'fixture') {\r\n        return (\r\n            <div id=\"navigation-tab\">\r\n                <div onClick={() => { tabClick(tab, setTab, page, 'competition') }} className=\"tab\"><p className={tab === 'competition' ? 'dark' : 'light'}>COMPETITIONS</p></div>\r\n                <div onClick={() => { tabClick(tab, setTab, page, 'team') }} className=\"tab\"><p className={tab === 'team' ? 'dark' : 'light'}>TEAMS</p></div>\r\n                <div onClick={() => { tabClick(tab, setTab, page, 'fixture') }} className=\"tab\"><p className={tab === 'fixture' ? 'dark' : 'light'}>IN-PLAY</p></div>\r\n            </div>\r\n        )\r\n    }\r\n    else if (tab.includes('_competition_result') || tab.includes('_competition_fixture') || tab.includes('_competition_inplay') || tab.includes('_competition_team')) {\r\n        let currentPage = tab.split('_')[0]\r\n\r\n        return (\r\n            <div id=\"navigation-tab\">\r\n                <div onClick={() => { tabClick(tab, setTab, page, `${currentPage}_competition_team`); setContent(false) }} className=\"tab\"><p className={tab.includes('_competition_team') ? 'dark' : 'light'}>TEAMS</p></div>\r\n                <div onClick={() => { tabClick(tab, setTab, page, `${currentPage}_competition_inplay`); setContent(false) }} className=\"tab\"><p className={tab.includes('_competition_inplay') ? 'dark' : 'light'}>IN-PLAY</p></div>\r\n                <div onClick={() => { tabClick(tab, setTab, page, `${currentPage}_competition_result`); setContent(false) }} className=\"tab\"><p className={tab.includes('_competition_result') ? 'dark' : 'light'}>RESULTS</p></div>\r\n                <div onClick={() => { tabClick(tab, setTab, page, `${currentPage}_competition_fixture`); setContent(false) }} className=\"tab\"><p className={tab.includes('_competition_fixture') ? 'dark' : 'light'}>FIXTURES</p></div>\r\n            </div>\r\n        )\r\n    }\r\n    else if (tab.includes('_team_result') || tab.includes('_team_fixture') || tab.includes('_team_inplay')) {\r\n        let currentPage = tab.split('_')[0]\r\n\r\n        return (\r\n            <div id=\"navigation-tab\">\r\n                <div onClick={() => { tabClick(tab, setTab, page, `${currentPage}_team_result`); setContent(false) }} className=\"tab\"><p className={tab.includes('_team_result') ? 'dark' : 'light'}>RESULTS</p></div>\r\n                <div onClick={() => { tabClick(tab, setTab, page, `${currentPage}_team_fixture`); setContent(false) }} className=\"tab\"><p className={tab.includes('_team_fixture') ? 'dark' : 'light'}>FIXTURES</p></div>\r\n                <div onClick={() => { tabClick(tab, setTab, page, `${currentPage}_team_inplay`); setContent(false) }} className=\"tab\"><p className={tab.includes('_team_inplay') ? 'dark' : 'light'}>IN-PLAY</p></div>\r\n            </div>\r\n        )\r\n    }\r\n    else {\r\n        return null\r\n    }\r\n}\r\n\r\nfunction NavigationBody(props) {\r\n\r\n    let setContent = props.setContent\r\n    let page = props.page\r\n    let tab = page.currentTags[page.currentTags.length - 1]//props.tab\r\n    let leagues = props.leagues\r\n    let teams = props.teams\r\n    let fixtures = props.fixtures\r\n    let selectFixtureTab = props.selectFixtureTab\r\n\r\n    const [teamFixtures, setTeamFixtures] = useState([])\r\n\r\n    useEffect(() => {\r\n        //Get results when searched\r\n        (async () => {\r\n            let lastTag = page.currentTags[page.currentTags.length - 1]\r\n            if (!lastTag) return\r\n\r\n            if (lastTag.includes('_team_result')) {\r\n                setLoadScreen(true)\r\n                let result = await GetTeamMatches(lastTag.split('_')[0])\r\n                setTeamFixtures(result.data)\r\n                setLoadScreen(false)\r\n            } else if (lastTag.includes('_competition_result')) {\r\n                setLoadScreen(true)\r\n                let result = await GetFixturesInLeagueByName(lastTag.split('_')[0])\r\n                updateFixtures(result.data)\r\n                setLoadScreen(false)\r\n            }\r\n            else if (lastTag.includes('_fixture_details')) {\r\n                let secondLastTab = page.tags[page.tags.length - 2]\r\n                if (!secondLastTab) return\r\n\r\n                setLoadScreen(true)\r\n                let result = await GetFixturesInLeagueByName(secondLastTab.split('_')[0]) //Getting second-last tag\r\n                updateFixtures(result.data)\r\n                setLoadScreen(false)\r\n            }\r\n        })()\r\n\r\n    }, [page.searchTerm])\r\n\r\n    //console.log(page.tags)\r\n\r\n    function competitionFixtureResolver(statusArray, icon) {\r\n        let click = async (fixture) => {\r\n            backButtonListenerStack.push(() => {\r\n                selectFixtureTab(1)\r\n                page.popPage(`${fixture.fixture_id}_fixture_details`)\r\n                setContent(false)\r\n                updateTab(tab)\r\n            })\r\n\r\n            setContent(true)\r\n            currentMatch = fixture\r\n            page.setPage([`${fixture.fixture_id}_fixture_details`]) //fixture.homeTeam.team_name, fixture.awayTeam.team_name\r\n            updateTab(`${fixture.fixture_id}_fixture_details`)\r\n            ShowContentPage(true, fixture)\r\n        }\r\n\r\n        let filtered = fixtures.filter((fixture) => statusArray.includes(fixture.statusShort))\r\n\r\n        if(filtered.length == 0)\r\n            return <InfoTile clicked={() => {}} name=\"NO RESULTS FOUND\"></InfoTile>\r\n\r\n        return (filtered.map(fixture => (\r\n            <Tile icon={icon} clicked={() => { click(fixture) }} key={fixture.fixture_id} name={`${fixture.homeTeam.team_name} VS ${fixture.awayTeam.team_name}`} id={fixture.fixture_id}></Tile>\r\n        ))\r\n        )\r\n    }\r\n\r\n    function teamFixtureResolver(statusArray, icon) {\r\n        let click = async (fixture) => {\r\n\r\n            backButtonListenerStack.push(() => {\r\n                selectFixtureTab(1)\r\n                page.popPage(`${fixture.fixture_id}_fixture_details`)\r\n                setContent(false)\r\n                updateTab(tab)\r\n            })\r\n\r\n            setContent(true)\r\n            currentMatch = fixture\r\n            console.log(currentMatch)\r\n            page.setPage([`${fixture.fixture_id}_fixture_details`]) //fixture.homeTeam.team_name, fixture.awayTeam.team_name\r\n            updateTab(`${fixture.fixture_id}_fixture_details`)\r\n            ShowContentPage(true, fixture)\r\n        }\r\n\r\n        let filtered = teamFixtures.filter((fixture) => statusArray.includes(fixture.statusShort))\r\n\r\n        if(filtered.length == 0)\r\n            return <InfoTile clicked={() => {}} name=\"NO RESULTS FOUND\"></InfoTile>\r\n\r\n        return (filtered.map(fixture => (\r\n            <Tile icon={icon} clicked={() => { click(fixture) }} key={fixture.fixture_id} name={`${fixture.homeTeam.team_name} VS ${fixture.awayTeam.team_name}`} id={fixture.fixture_id}></Tile>\r\n        ))\r\n        )\r\n    }\r\n\r\n    if (tab === 'home') { //Sports Selection\r\n\r\n        function click() {\r\n            let lastTab = page.tags[page.tags.length - 1]\r\n\r\n            updateTab('competition')\r\n            page.setPage(['competition'])\r\n\r\n            backButtonListenerStack.push(() => {\r\n                page.popPage(lastTab)\r\n                updateTab('home')\r\n            })\r\n        }\r\n\r\n        return (\r\n            <Tile name=\"SOCCER\" clicked={() => { click() }}></Tile>\r\n        )\r\n    }\r\n    else if (tab === 'competition') { //Competition\r\n\r\n        let click = async (league) => {\r\n            setLoadScreen(true)\r\n            let result = await GetFixturesInLeague(league.leagueId)\r\n            setLoadScreen(false)\r\n\r\n            if (result.status === \"failure\") {\r\n                showNotification(result.message)\r\n                return\r\n            }\r\n\r\n            updateFixtures(result.data)\r\n            updateTab(`${league.name}_competition_result`)\r\n\r\n            page.setPage([`${league.name}_competition_result`])\r\n\r\n            backButtonListenerStack.push(() => {\r\n                let lastTab = page.tags[page.tags.length - 1]\r\n\r\n                page.popPage(lastTab)\r\n                updateTab('competition')\r\n            })\r\n        }\r\n\r\n        console.log(leagues)\r\n\r\n        return (\r\n            leagues.map(league => (\r\n                <Tile icon={league.countryCode != null ? `fp ${league.countryCode.toLowerCase()}` : null} key={league._id} name={league.name} clicked={() => { click(league) }}></Tile>\r\n            ))\r\n        )\r\n    }\r\n    else if (tab === 'team') { //Teams\r\n\r\n        async function click(team) {\r\n            setLoadScreen(true)\r\n            let result = await GetTeamMatches(team.name)\r\n            setTeamFixtures(result.data)\r\n            setLoadScreen(false)\r\n\r\n            if (result.status === \"failure\") {\r\n                showNotification(result.message)\r\n                return\r\n            }\r\n\r\n            page.setPage([`${team.name}_team_result`])\r\n            updateTab(`${team.name}_team_result`)\r\n\r\n            backButtonListenerStack.push(() => {\r\n                let lastTab = page.tags[page.tags.length - 1]\r\n\r\n                page.popPage(lastTab)\r\n                updateTab('team')\r\n            })\r\n        }\r\n\r\n        return (\r\n            teams.map(team => (\r\n                <Tile clicked={() => { click(team) }} key={team._id} name={team.name}> id={team.teamId}</Tile>\r\n            ))\r\n        )\r\n    }\r\n    else if (tab.includes('_competition_result')) { //In-League Matches\r\n        return competitionFixtureResolver([\"FT\", \"AET\", \"PEN\"], 'fas fa-calendar-alt')\r\n    }\r\n    else if (tab.includes('_competition_fixture')) {\r\n        return competitionFixtureResolver([\"NS\"], 'fas fa-calendar-alt')\r\n    }\r\n    else if (tab.includes('_competition_inplay')) {\r\n        return competitionFixtureResolver([\"1H\", \"HT\", \"2H\", \"ET\", \"P\", \"BT\"], 'fas fa-stopwatch')\r\n    }\r\n    else if (tab.includes('_competition_team')) {\r\n        let selectedCompetition = tab.split('_')[0]\r\n\r\n        function click(team) {\r\n\r\n            page.setPage([`${team.name}_team_result`])\r\n            updateTab(`${team.name}_team_result`)\r\n\r\n            backButtonListenerStack.push(() => {\r\n                let lastTab = page.tags[page.tags.length - 1]\r\n\r\n                page.popPage(lastTab)\r\n                updateTab('team')\r\n            })\r\n        }\r\n\r\n        return teams.filter(team => team.leagueName == selectedCompetition).map(team => (\r\n            <Tile clicked={() => { click(team) }} key={team._id} name={team.name}> id={team.teamId}</Tile>\r\n        ))\r\n\r\n        // return (\r\n        //     teams.map(team => (\r\n        //         <Tile clicked={() => { click(team) }} key={team._id} name={team.name}> id={team.teamId}</Tile>\r\n        //     ))\r\n        // )\r\n    }\r\n    else if (tab.includes('_team_result')) {\r\n        return teamFixtureResolver([\"FT\", \"AET\", \"PEN\"], 'fas fa-calendar-alt')\r\n    }\r\n    else if (tab.includes('_team_fixture')) {\r\n        return teamFixtureResolver([\"NS\"], 'fas fa-calendar-alt')\r\n    }\r\n    else if (tab.includes('_team_inplay')) {\r\n        return teamFixtureResolver([\"1H\", \"HT\", \"2H\", \"ET\", \"P\", \"BT\"], 'fas fa-stopwatch')\r\n    }\r\n    else if (tab.includes('user_profile')) {\r\n\r\n        return <ProfileDesktop username={profileUsername}></ProfileDesktop>\r\n    }\r\n    else {\r\n        return null\r\n    }\r\n}\r\n\r\nfunction Tile(props) {\r\n    return (\r\n        <div className=\"team-tile\" onClick={props.clicked}>\r\n            {\r\n                props.icon != null ? <i className={props.icon}></i> : <i className=\"logo fas fa-globe-europe\"></i>\r\n            }\r\n            <div className=\"divider\"></div>\r\n            <p className=\"name\">{props.name}</p>\r\n        </div>\r\n    )\r\n}\r\n\r\nfunction InfoTile(props){\r\n    return (\r\n        <div className=\"team-tile\" onClick={props.clicked}>\r\n            <p className=\"name\">{props.name}</p>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default RightMenu","import React, { useState, useEffect } from 'react'\r\nimport { showNotification } from './NoticationBar'\r\nimport { setLoadScreen } from './LoadDialog'\r\nimport { GetLogs, CheckIfPostExists, RemoveLog } from '../Communicator'\r\nimport { showPostPage } from './PostPage'\r\nimport { Page } from '../Config'\r\n\r\nlet _setLogs\r\n\r\nfunction ModeratorPage({setDivision}) {\r\n    return (\r\n        <div id=\"moderator-page\">\r\n            <p className=\"title\">MODERATION PANEL</p>\r\n            <div className=\"divider\"></div>\r\n            <ModerationLog setDivision={setDivision}></ModerationLog>\r\n        </div>\r\n    )\r\n}\r\n\r\nfunction ModerationLog({setDivision}) {\r\n    const [logs, setLogs] = useState([])\r\n    _setLogs = setLogs\r\n\r\n    return (\r\n        <Page.Consumer>\r\n            {page => <div className=\"mod-log\">\r\n                <p className=\"title\">RECENT REPORTS</p>\r\n                <p className=\"description\">Once a reported post has been deleted, remove it using the 'check' button on each log.</p> \r\n                <div className=\"divider\"></div>\r\n                <div className=\"log-holder\">\r\n                    {\r\n                        logs.length > 0 ? logs.map(log => <Log key={log._id} log={log} setLogs={setLogs} page={page} setDivision={setDivision}></Log>) : <p className=\"empty\">NO LOGS FOUND</p>\r\n                    }\r\n                </div>\r\n                <div className=\"paging\">\r\n                    <div className=\"next selector\">NEXT</div>\r\n                    <div className=\"previous selector\">PREVIOUS</div>\r\n                </div>\r\n            </div>\r\n            }\r\n        </Page.Consumer>\r\n    )\r\n}\r\n\r\nfunction Log({ log, setLogs, page, setDivision }) {\r\n    return (\r\n        <div className=\"log-tile\" onClick={() => { showPost(log, log.time, setDivision, page) }}>\r\n            <div className=\"main\">\r\n                <p className=\"log-title\">{log.postTitle}</p>\r\n                <p>Made by: <span>{log.postUsername}</span></p>\r\n            </div>\r\n            <i className=\"icon fas fa-check\" onClick={async (e) => {\r\n                e.stopPropagation()\r\n                let result = await RemoveLog(log._id)\r\n                if(result.status == 'success')\r\n                    setLogs(state => state.filter(l => l._id != log._id))\r\n            }}></i>\r\n            <p className=\"flags\">{log.totalFlags}</p>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport async function loadLogs() {\r\n    setLoadScreen(true)\r\n    let result = await GetLogs(0)\r\n    if (result.status == 'failure')\r\n        _setLogs([])\r\n    else\r\n        _setLogs(result.data)\r\n    setLoadScreen(false)\r\n}\r\n\r\nasync function showPost(log, time, setDivision, page) {\r\n    setLoadScreen(true)\r\n    let result = await CheckIfPostExists(log.postId)\r\n    setLoadScreen(false)\r\n\r\n    if (result.status == 'failure')\r\n        return showNotification(\"Post does not exist\")\r\n\r\n    let post = result.data\r\n\r\n    let votes = post.votes\r\n    let totalVotes = 0\r\n    let timeVal = parseInt(time)\r\n    let date = new Date(timeVal)\r\n\r\n    for (let i = votes.length - 1; i >= 0; i--) {\r\n        totalVotes += votes[i].votes\r\n\r\n        if (votes[i].tag === page.currentTags)\r\n            break\r\n    }\r\n\r\n    let newPost = post\r\n    newPost.totalVotes = totalVotes\r\n    newPost.date = date.toLocaleString()\r\n    setDivision('post')\r\n    showPostPage(true, newPost)\r\n}\r\n\r\nexport default ModeratorPage","import React, { useState, useEffect, useRef } from 'react'\r\nimport { MakeComment, GetPostComments,DoVoteComment } from '../Communicator'\r\nimport { EmbedLink } from '../Utils'\r\nimport { User } from '../Config'\r\n\r\nlet changeVisibility = null\r\nlet currentPost = null\r\n\r\nexport function PostPage(props) {\r\n    //get postdata\r\n    //getcomments\r\n\r\n    const [visibility, setVisibility] = useState(false)\r\n    const [typedComment, textInput] = CommentInput()\r\n    const [commentFilter, setCommentFilter] = useState('TOP')\r\n\r\n    changeVisibility = setVisibility\r\n\r\n    if (!visibility)\r\n        return null\r\n\r\n    let tree = renderTree(currentPost.commentArray, currentPost.commentDictionary)\r\n\r\n    //Sort here\r\n    switch (commentFilter) {\r\n        case 'TOP':\r\n            tree.sort((a, b) => b[0][0].votes - a[0][0].votes)\r\n            break\r\n        case 'NEW':\r\n            tree.sort((a, b) => b[0][0].time - a[0][0].time)\r\n            break\r\n        case 'CONTROVERTIAL':\r\n            tree.sort((a, b) => a[0][0].votes - b[0][0].votes)\r\n            break\r\n        default:\r\n            tree.sort((a, b) => b[0][0].votes - a[0][0].votes)\r\n            break\r\n    }\r\n    tree.forEach(x => console.log(x))\r\n\r\n    return (\r\n        <div id=\"post-page\">\r\n            <i className=\"exit fas fa-times-circle\" onClick={() => { props.setDivision('postlist') }}></i>\r\n            <div className=\"main-post-container\">\r\n                <p className=\"main-post-user\">{currentPost.username}</p>\r\n                <p className=\"main-post-title\">{currentPost.title}</p>\r\n                {/* <p className=\"main-post-description\">{currentPost.body}</p> */}\r\n                {\r\n                    EmbedLink(currentPost.embedUrl)\r\n                }\r\n                <div className=\"details\">\r\n                    <p className=\"date\">{currentPost.date}</p>\r\n                    <div className=\"votes\">\r\n                        <div className=\"column\">\r\n                            <i onClick={() => { }} className=\"upvote fas fa-caret-up\"></i>\r\n                            <p className=\"votes\">{currentPost.totalVotes}</p>\r\n                            <i onClick={() => { }} className=\"downvote fas fa-caret-down\"></i>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                {/* <div className=\"toolbar\">\r\n                    <i className=\"emblem fas fa-fire\"></i>\r\n                    <i className=\"emblem fas fa-fire\"></i>\r\n                    <i className=\"emblem fas fa-fire\"></i>\r\n                    <i className=\"emblem fas fa-fire\"></i>\r\n                    <i className=\"emblem fas fa-fire\"></i>\r\n                </div> */}\r\n            </div>\r\n            <div className=\"comment-title\">\r\n                <p className=\"title\">COMMENTS - <span className=\"inner\">{currentPost.commentArray.length} comments</span></p>\r\n                <FilterBar setCommentFilter={setCommentFilter}></FilterBar>\r\n            </div>\r\n            <div className=\"reply-bar\">\r\n                {textInput}\r\n                <i className=\"fas fa-paper-plane\" onClick={() => { MakeComment(typedComment, false, currentPost._id).then(/* Add to comment list */) }}></i>\r\n            </div>\r\n            <div className=\"comment-section\">\r\n                {\r\n                    tree.map(root => <Comment key={root[0][0]._id} childrenTree={root} isLeaf={root[0][0].isLeaf} level={1} parentId={root[0][0]._id} username={root[0][0].username} description={root[0][0].description} votes={root[0][0].votes}></Comment>)\r\n                }\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nfunction renderTree(commentArray, commentDictionary) {\r\n\r\n    function transformToObject(item, parentId) {\r\n        return {\r\n            _id: item._id,\r\n            isLeaf: item.isLeaf,\r\n            username: item.username,\r\n            description: item.description,\r\n            parentId: parentId,\r\n            votes: item.votes\r\n        }\r\n    }\r\n\r\n    function search(childrenIds, parentId) { //breadth first\r\n        let childrenTree = []\r\n        let rowStack = []\r\n        let firstRow = []\r\n\r\n        for (let childId of childrenIds) {\r\n            firstRow.push(transformToObject(commentDictionary[childId], parentId))\r\n\r\n            for (let id of commentDictionary[childId].childrenIds) {\r\n                rowStack.push({ id: id, parentId: childId })\r\n            }\r\n        }\r\n\r\n        childrenTree.push(firstRow)\r\n\r\n        while (rowStack.length != 0) {\r\n            let row = []\r\n            let newChildRow = []\r\n\r\n            for (let child of rowStack) {\r\n                row.push(transformToObject(commentDictionary[child.id], child.parentId))\r\n\r\n                for (let id of commentDictionary[child.id].childrenIds) {\r\n                    newChildRow.push({ id: id, parentId: child.id })\r\n                }\r\n            }\r\n\r\n            rowStack = newChildRow\r\n            childrenTree.push(row)\r\n        }\r\n\r\n        return childrenTree\r\n    }\r\n\r\n    let tree = []\r\n\r\n    for (let item of commentArray) {\r\n        if (item.isChild)\r\n            continue\r\n\r\n        let branch = search(item.childrenIds, item._id) //is tree\r\n\r\n        if (branch[0].length == 0) {\r\n            tree.push([[item]])\r\n        } else {\r\n            branch.unshift([item])\r\n            tree.push(branch)\r\n        }\r\n\r\n    }\r\n    return tree\r\n}\r\n\r\n// function makeCommentTree(comments) {\r\n//     let tree = {}\r\n\r\n//     for (let index in comments) {\r\n//         if (!comments[index].isLeaf)\r\n//             continue\r\n\r\n//         let branch = {}\r\n//         let node = comments[index]\r\n//         branch[node._id] = node\r\n//         let isRoot = !node.isChild\r\n\r\n\r\n//         while (!isRoot) {\r\n//             node.parent = comments[node.parentId]\r\n//             node = node.parent\r\n//             isRoot = !node.isChild\r\n\r\n//             // if(isRoot){\r\n//             //     node.parent = node = node.parent\r\n//             // }\r\n//         }\r\n\r\n//         //console.log(branch)\r\n//         Object.assign(tree, branch)\r\n//     }\r\n\r\n//     console.log(tree)\r\n// }\r\n\r\nfunction Comment({ childrenTree, level, parentId, username, description, isLeaf, votes }) {\r\n    const [replySelected, setReplySelected] = useState(false)\r\n    const [reply, setReply] = useState('')\r\n    const [vote, setVotes] = useState(votes)\r\n    const tArea = useRef(null)\r\n\r\n    return (\r\n        <div className=\"comment\">\r\n            <div className=\"main-section\">\r\n                <div className=\"top\">\r\n                    <p className=\"comment-user\">{username}</p>\r\n                    <p className=\"comment-description\">{description}</p>\r\n\r\n                    <div className=\"votes\">\r\n                        <div className=\"column\">\r\n                            <i onClick={() => { voteComment('add', parentId, () => {setVotes(state => state + 1)}) }} className=\"upvote fas fa-caret-up\"></i>\r\n                            <p className=\"votes\">{vote}</p>\r\n                            <i onClick={() => { voteComment('subtract', parentId, () => {setVotes(state => state - 1)}) }} className=\"downvote fas fa-caret-down\"></i>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <User.Consumer>{\r\n                    user => user.username == null ? <></> :\r\n                        <div className=\"reply-section\">\r\n                            {\r\n                                !replySelected ?\r\n                                    <div className=\"reply-lower\">\r\n                                        <p onClick={() => { setReplySelected(true) }}>REPLY</p>\r\n                                        <CommentDropdown username={username} user={user}></CommentDropdown>\r\n                                    </div> :\r\n                                    <div>\r\n                                        <textarea ref={tArea} onChange={(e) => { setReply(e.target.value) }}></textarea>\r\n                                        <div className=\"reply-lower\">\r\n                                            <p onClick={async () => {\r\n                                                let result = await MakeComment(reply, true, parentId)\r\n                                                tArea.current.value = ''\r\n                                            }}>SEND</p>\r\n                                            <CommentDropdown username={username} user={user}></CommentDropdown>\r\n                                        </div>\r\n                                    </div>\r\n                            }\r\n                        </div>\r\n                }\r\n                </User.Consumer>\r\n            </div>\r\n\r\n            <div className={!isLeaf ? \"children\" : \"\"}>\r\n                {\r\n                    level >= childrenTree.length ? <></> : childrenTree[level].filter(child => child.parentId == parentId).map(child => <Comment key={child._id} isLeaf={child.isLeaf} username={child.username} parentId={child._id} description={child.description} votes={child.votes} level={level + 1} childrenTree={childrenTree}></Comment>)\r\n                }\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nfunction CommentInput() {\r\n    const [input, setInput] = useState('')\r\n    const textInput = <textarea placeholder=\"Write your comment here...\" onChange={(e) => { setInput(e.target.value) }}></textarea>\r\n\r\n    return [input, textInput]\r\n}\r\n\r\nfunction FilterBar(props) {\r\n    let setCommentFilter = props.setCommentFilter\r\n\r\n    const [dropdownVisibility, setDropdownVisibility] = useState(false)\r\n    const [buttonDisplayData, setButtonDisplayData] = useState(['TOP', 'fas fa-chart-line'])\r\n    const dropdown = useRef(null)\r\n\r\n    function dropdownSelect(filter, icon) {\r\n        setCommentFilter(filter.toUpperCase())\r\n        setButtonDisplayData([filter.toUpperCase(), icon])\r\n        setDropdownVisibility(false)\r\n    }\r\n\r\n    function documentClick(e) {\r\n        if (dropdown.current && !dropdown.current.contains(e.target) && dropdownVisibility) {\r\n            setDropdownVisibility(false)\r\n        }\r\n    }\r\n\r\n    useEffect(() => {\r\n        document.addEventListener('mousedown', documentClick)\r\n\r\n        return () => {\r\n            document.removeEventListener('mousedown', documentClick)\r\n        }\r\n    }, [dropdownVisibility])\r\n\r\n    return (\r\n        <div id=\"filterbar\">\r\n            <div id=\"filter-selector\" ref={dropdown} onClick={() => { setDropdownVisibility(state => !state) }}>\r\n                <i className={buttonDisplayData[1]}></i>\r\n                <div className=\"divider\"></div>\r\n                <p>{buttonDisplayData[0]}</p>\r\n                {\r\n                    !dropdownVisibility ? <></> : <div className=\"dropdown\" style={{ right: '0px', left: 'auto' }} onClick={(e) => { e.stopPropagation() }}>\r\n                        <p onClick={() => { dropdownSelect('Top', 'fas fa-chart-line') }}>Top</p>\r\n                        {/* <p onClick={() => { dropdownSelect('Hot', 'fas fa-burn') }}>Hot</p> */}\r\n                        {/* <p onClick={() => { dropdownSelect('Trending', 'fab fa-red-river') }}>Trending</p> */}\r\n                        <p onClick={() => { dropdownSelect('New', 'fas fa-certificate') }}>New</p>\r\n                        <p onClick={() => { dropdownSelect('Controvertial', 'fas fa-skull-crossbones') }}>Controvertial</p>\r\n                    </div>\r\n                }\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nfunction CommentDropdown(props) {\r\n    const dropdown = useRef(null)\r\n    let user = props.user\r\n    let post = props.post\r\n\r\n    const [menuOpen, setMenuOpen] = useState(false)\r\n\r\n    function isInBounds() {\r\n        if (user.rank == 'user' || user.rank == '')\r\n            return false\r\n\r\n        if (user.rank == 'admin')\r\n            return true\r\n\r\n        if (user.moderatedTags.some(elem => post.tags.includes(elem))) {\r\n            return true\r\n        }\r\n        else {\r\n            return false\r\n        }\r\n    }\r\n\r\n    function documentClick(e) {\r\n        if (dropdown.current && !dropdown.current.contains(e.target)) {\r\n            setMenuOpen(false)\r\n        }\r\n    }\r\n\r\n    //const isModInBounds = useModInBounds()\r\n\r\n    useEffect(() => {\r\n        document.addEventListener('mousedown', documentClick)\r\n        return () => {\r\n            document.removeEventListener('mousedown', documentClick)\r\n        }\r\n    }, [])\r\n\r\n    async function flagPost() {\r\n        //FlagPost(post._id)\r\n    }\r\n\r\n    async function muteUser() {\r\n        //setModalVisibility(\"muteuser\", true, props.username)\r\n    }\r\n\r\n    async function banUser() {\r\n        //BanUser(props.username)\r\n    }\r\n\r\n    async function deletePost(id) {\r\n        //let result = await DeletePost(id)\r\n        //if (result.status == 'success') {\r\n        //  props.setPosts(state => state.filter(p => p._id != id))\r\n        //}\r\n    }\r\n\r\n    return (\r\n        <i className=\"fas fa-ellipsis-v\" ref={dropdown} onClick={(e) => { e.stopPropagation(); setMenuOpen(state => !state) }}>\r\n            {\r\n                !menuOpen ? <></> : <div className=\"dropdown\">\r\n                    {\r\n                        user.username == props.username || user.isMod() ? <p onClick={(e) => { deletePost(props.post._id) }}>DELETE</p> : <></>\r\n                    }\r\n                    {\r\n                        //user.username != props.username ? <p onClick={(e) => { flagPost() }}>FLAG</p> : <></>\r\n                    }\r\n                    {\r\n                        //user.isMod() && isInBounds() && user.username != props.username ? <p onClick={(e) => { muteUser() }}>MUTE</p> : <></>\r\n                    }\r\n                    {\r\n                        //user.rank == 'admin' && user.username != props.username ? <p onClick={(e) => { banUser() }}>BAN</p> : <></>\r\n                    }\r\n                </div>\r\n            }\r\n        </i>\r\n    )\r\n}\r\n\r\nfunction voteComment(voteType, id, callback) {\r\n    DoVoteComment(voteType, id)\r\n        .then(res => {\r\n            if(res.status == 'success')\r\n                callback(voteType)\r\n        })\r\n}\r\n\r\nexport async function showPostPage(visibility, post) {\r\n    if (!visibility)\r\n        return changeVisibility(false)\r\n\r\n    //show loading\r\n    let result = await GetPostComments(post._id)\r\n\r\n    let commentArray = Object.values(result.data)\r\n    post.commentArray = commentArray\r\n    post.commentDictionary = result.data\r\n\r\n    currentPost = post\r\n    changeVisibility(true)\r\n}","import React, { useState, useContext, useEffect, useRef } from 'react'\r\nimport { setModalVisibility } from './Modal' //login, feedback\r\nimport { User, Page } from '../Config'\r\nimport { Dropdown } from './Dropdown'\r\nimport { RegisterPage, enablePage } from './RegisterPage'\r\nimport { logOut } from '../Utils'\r\nimport { openUserProfile } from './Profile'\r\nimport { showUserProfile, addToBackButtonStack } from './RightMenu'\r\nimport { SetDivision } from '../App'\r\nimport { loadLogs } from './ModeratorPage'\r\n\r\nfunction LeftMenu(props) {\r\n\r\n  // if (!props.activated)\r\n  //   return null\r\n\r\n  return (\r\n    <div>\r\n      <div className=\"leftmenu\" style={{ display: props.activated ? 'flex' : 'none' }}>\r\n        <CredentialBar nameClass={\"credential-bar\"}></CredentialBar>\r\n        <MenuColumn></MenuColumn>\r\n        <div id=\"menu-divider\">\r\n          <div className=\"line\"></div>\r\n          <p className=\"divider-text\">FOLLOWING</p>\r\n          <div className=\"line\"></div>\r\n        </div>\r\n        <FollowingContainer></FollowingContainer>\r\n      </div>\r\n      <div className=\"leftmenu desktop\">\r\n        <CredentialBar nameClass={\"credential-bar\"}></CredentialBar>\r\n        <MenuColumn></MenuColumn>\r\n        <div id=\"menu-divider\">\r\n          <div className=\"line\"></div>\r\n          <p className=\"divider-text\">FOLLOWING</p>\r\n          <div className=\"line\"></div>\r\n        </div>\r\n        <FollowingContainer></FollowingContainer>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport function CredentialBar(props) { //Returns Register/login or profile/notification\r\n  return (\r\n    <User.Consumer>\r\n      {user => {\r\n        if (user.username == null) {\r\n          return (<div className={`${props.nameClass}`}>\r\n            <div className=\"button fixed\" onClick={() => { enablePage() }}>\r\n              <div className=\"items\">\r\n                <div className=\"leading\">\r\n                  <div className=\"icon dot\"></div>\r\n                  <p className=\"text\">REGISTER</p>\r\n                </div>\r\n              </div>\r\n              <div className=\"shadow\"></div>\r\n            </div>\r\n            <div className=\"button fixed\" onClick={() => { setModalVisibility(\"login\", true) }}>\r\n              <div className=\"items\">\r\n                <div className=\"leading\">\r\n                  <div className=\"icon dot\"></div>\r\n                  <p className=\"text\">LOGIN</p>\r\n                </div>\r\n              </div>\r\n              <div className=\"shadow\"></div>\r\n            </div>\r\n          </div>)\r\n        } else {\r\n          return (\r\n            <div className={`${props.nameClass}`}>\r\n              <Page.Consumer>{\r\n                page => <>\r\n                  <Dropdown zIndex={21} choices={[\r\n                    { name: 'Profile', action: () => { showUserProfile(user.username, page) } },\r\n                    { name: 'Log Out', action: () => { logOut() } }]} title={user.username}></Dropdown>\r\n                  {/* <i className=\"notification fas fa-bell\"></i> */}\r\n                </>\r\n              }</Page.Consumer>\r\n            </div>)\r\n        }\r\n      }}\r\n    </User.Consumer>\r\n  )\r\n}\r\n\r\nfunction MenuColumn() {\r\n  return (\r\n    <div id=\"menu-column\">\r\n      <MenuButton onPress={() => { window.location.reload() }} title='HOME' iconClass='fas fa-home'></MenuButton>\r\n      <User.Consumer>\r\n        {\r\n          user => user.isMod() ? <MenuButton onPress={() => { SetDivision('modpage'); loadLogs() }} title='MODERATION' iconClass='fas fa-user-friends'></MenuButton> : <></>\r\n        }\r\n      </User.Consumer>\r\n      <MenuButton onPress={() => { }} title='HELP' iconClass='fas fa-question-circle'></MenuButton>\r\n      <MenuButton onPress={() => { setModalVisibility(\"feedback\", true) }} title='FEEDBACK' iconClass='fas fa-comments'></MenuButton>\r\n    </div>\r\n  )\r\n}\r\n\r\nfunction FollowingContainer() {\r\n  return (\r\n    <div id=\"following-container\">\r\n      <User.Consumer>\r\n        {\r\n          user => {\r\n            return (<>\r\n              <FollowingButton title={\"SPORTS\"} items={user.followingSports.map(i => ['', i])}></FollowingButton> {/*Fix this*/}\r\n              <FollowingButton title={\"COMPETITIONS\"} items={user.followingCompetitions}></FollowingButton>\r\n              <FollowingButton title={\"TEAMS\"} items={user.followingTeams}></FollowingButton>\r\n            </>)\r\n          }\r\n        }\r\n      </User.Consumer>\r\n    </div>\r\n  )\r\n}\r\n\r\nfunction MenuButton(props) {\r\n  return (\r\n    <div className=\"button gap\" onClick={() => { props.onPress() }}>\r\n      <div className=\"items\">\r\n        <div className=\"leading\">\r\n          <i className={`icon ${props.iconClass}`}></i>\r\n          <p className=\"text\">{props.title}</p>\r\n        </div>\r\n        <div className=\"dot\"></div>\r\n      </div>\r\n      <div className=\"shadow\"></div>\r\n    </div>\r\n  )\r\n}\r\n\r\nfunction FollowingButton(props) {\r\n  //props.title = teams/sports/competitions\r\n\r\n  const [style, setStyle] = useState('')\r\n\r\n  function itemClicked(item, page) {\r\n    if (props.title == 'TEAMS') {\r\n      TeamSearched(item, page)\r\n    }\r\n    else if (props.title == 'SPORTS') {\r\n\r\n    }\r\n    else if (props.title == 'COMPETITIONS') {\r\n      CompetitionSearched(item, page)\r\n    }\r\n  }\r\n\r\n  async function TeamSearched(team, page) {\r\n    page.setTags(['home', 'team', `${team}_team_result`])\r\n    addToBackButtonStack(2, page, 1)\r\n  }\r\n\r\n  async function CompetitionSearched(competition, page) {\r\n    page.setTags(['home', 'competition', `${competition}_competition_result`])\r\n    addToBackButtonStack(2, page, 1)\r\n  }\r\n\r\n  return (\r\n    <div className=\"button gap\" onClick={() => { style == '' ? setStyle('open') : setStyle('') }}>\r\n      <div className=\"items\">\r\n        <div className=\"leading\">\r\n          <p className=\"text\">{props.title}</p>\r\n        </div>\r\n        <i className=\"trailing fas fa-plus-circle\"></i>\r\n      </div>\r\n      <Page.Consumer>\r\n        {page => <div className={`follow-body ${style}`}>\r\n          {\r\n            props.items.map(item => <p className=\"follow-item\" key={item} onClick={() => { itemClicked(item[1], page) }}>{item[1]}</p>)\r\n          }\r\n        </div>}\r\n      </Page.Consumer>\r\n      <div className=\"shadow\"></div>\r\n    </div>\r\n  )\r\n}\r\n\r\n// function EntryHolder(props){\r\n//   return()\r\n// }\r\n\r\nexport default LeftMenu","import React, { useState, useEffect } from 'react'\nimport LeftMenu from './components/LeftMenu'\nimport { PostContainer, SearchBar } from './components/MainPage'\nimport RightMenu from './components/RightMenu'\nimport ContentPage from './components/ContentPage'\nimport { LoginModal, CreatePostModal, FeedbackModal, MuteUserModal } from './components/Modal'\nimport { NotificationBar } from './components/NoticationBar'\nimport { User, Page } from './Config'\nimport { isAuthenticated } from './Utils'\nimport { GetSelfInfo, Register } from './Communicator'\nimport { LoadScreen } from './components/LoadDialog'\nimport { Profile } from './components/Profile'\nimport { PostPage } from './components/PostPage'\nimport './style.css'\nimport { CredentialBar } from './components/LeftMenu'\nimport ModeratorPage from './components/ModeratorPage'\nimport {RegisterPage} from './components/RegisterPage'\n\nlet setDiv\n\nfunction App(props) {\n\n  const [menu, setMenu] = useState(0)\n  const [division, setDivision] = useState('postlist') //Change to context\n\n  setDiv = setDivision\n\n  useEffect(() => {\n\n    async function getUser() {\n      if (isAuthenticated()) {\n        let result = await GetSelfInfo()\n        props.user.editUser({\n          username: result.data.username,\n          followingSports: result.data.followedSports,\n          followingCompetitions: result.data.followedCompetitions,\n          followingTeams: result.data.followedTeams,\n          followers: result.data.followers,\n          following: result.data.following,\n          rank: result.data.rank,\n          moderatedTags: result.data.moderatedTags\n        })\n      }\n    }\n\n    getUser()\n  }, [])\n\n  return (\n    <>\n      <User.Consumer>\n        {user =>\n          <div className=\"main-root\">\n            <NavBar changeMenu={setMenu} menu={menu}></NavBar>\n            {/* <Profile></Profile> */} {/* REMOVED FULL SCREEN PROFILE TO IMMPLEMENT RIGHT BAR STYLE*/}\n            <LoadScreen></LoadScreen>\n            <LoginModal></LoginModal>\n            <CreatePostModal></CreatePostModal>\n            <RegisterPage></RegisterPage>\n            <FeedbackModal></FeedbackModal>\n            <MuteUserModal></MuteUserModal>\n            <div id=\"desktop-container\">\n              <LeftMenu activated={menu === 1 ? true : false}></LeftMenu>\n              <Division division={division} user={user} setDivision={setDivision}></Division>\n              <RightMenu activated={menu === 2 ? true : false}></RightMenu>\n            </div>\n            <NotificationBar></NotificationBar>\n          </div>\n        }\n      </User.Consumer>\n    </>\n  )\n}\n\nfunction Division(props) {\n\n  if (props.division == 'postlist') {\n    return <Page.Consumer>\n      {page =>\n        <PostContainer page={page} user={props.user} setDivision={props.setDivision}></PostContainer>\n      }\n    </Page.Consumer>\n  }\n  else if (props.division == 'post') {\n    return <PostPage setDivision={props.setDivision}></PostPage>\n  }\n  else if (props.division == 'modpage') {\n    return <ModeratorPage setDivision={props.setDivision}></ModeratorPage>\n  }\n}\n\nfunction NavBar(props) {\n\n  const onMenuClick = (val) => {\n\n    if (props.menu === val) {\n      props.changeMenu(0)\n      return\n    }\n\n    props.changeMenu(val)\n  }\n\n  return (\n    <div id=\"navbar\">\n      <i className=\"menu-selector fas fa-bars\" onClick={() => { onMenuClick(1) }}></i>\n      <img alt=\"logo\" src=\"./media/logo.png\" onClick={() => { window.location.reload() }} />\n      <Page.Consumer>\n        {\n          page => <SearchBar type=\"desktop\" page={page}></SearchBar>\n        }\n      </Page.Consumer>\n      <i className=\"menu-selector fas fa-bars\" onClick={() => { onMenuClick(2) }}></i>\n      <CredentialBar nameClass={\"credential-bar desktop\"}></CredentialBar>\n    </div>)\n}\n\nexport function SetDivision(type) {\n  setDiv(type)\n}\n\nexport default App\n","import React, { useState, useEffect, useRef } from 'react'\r\nimport { DoVote, GetUserInfo, DeletePost, FlagPost, BanUser } from '../Communicator'\r\nimport { showPostPage } from './PostPage'\r\nimport { EmbedLink } from '../Utils'\r\nimport { User } from '../Config'\r\nimport { openUserProfile } from \"./Profile\"\r\nimport { showUserProfile } from './RightMenu'\r\nimport { setModalVisibility } from \"./Modal\"\r\n\r\nexport default function Post(props) {\r\n\r\n  let timeVal = parseInt(props.time)\r\n  let date = new Date(timeVal)\r\n\r\n  const [votes, setVotes] = useState(0)\r\n\r\n  useEffect(() => {\r\n\r\n    let totalVotes = 0\r\n\r\n    for (let i = props.votes.length - 1; i >= 0; i--) {\r\n      totalVotes += props.votes[i].votes\r\n\r\n      if (props.votes[i].tag === props.page.currentTags)\r\n        break\r\n    }\r\n\r\n    setVotes(totalVotes)\r\n  }, [props.page.currentTags])\r\n\r\n  async function openProfile(username) {\r\n    //loadscreen\r\n    //let result = await GetUserInfo(username)\r\n\r\n    openUserProfile(true, username)\r\n  }\r\n\r\n  return (\r\n    <div className={props.viewType == 0 ? 'post' : 'post-compact'} onClick={() => { let newPost = props.post; newPost.totalVotes = votes; newPost.date = date.toLocaleString(); props.setDivision('post'); showPostPage(true, newPost) }}>\r\n      <div className=\"header\">\r\n        <h1>{props.title}</h1>\r\n        <User.Consumer>\r\n          {\r\n            user => {\r\n              return <PostDropdown setPosts={props.setPosts} user={user} username={props.username} post={props.post}></PostDropdown>\r\n            }\r\n          }\r\n        </User.Consumer>\r\n      </div>\r\n      <div className=\"compact-container\">\r\n        {\r\n          props.post.isEmbed ? EmbedLink(props.post.embedUrl, props.viewType) : <p className=\"description\">{props.body}</p>\r\n        }\r\n        <div className=\"divider\"></div>\r\n        <div className=\"row\">\r\n          <div className=\"column\">\r\n            <div className=\"user-details\" onClick={(e) => { e.stopPropagation(); showUserProfile(props.username, props.page) }}>\r\n              <p className=\"username\">{props.username}</p>\r\n              <div className=\"circle\"></div>\r\n              <i className=\"emblem fas fa-fire\"></i>\r\n            </div>\r\n            <div className=\"timestamp\">\r\n              <p>{date.toLocaleString()}</p>\r\n            </div>\r\n          </div>\r\n          <div className=\"voter\">\r\n            <div className=\"column\">\r\n              <i onClick={(e) => { e.stopPropagation(); likePost(props.id, props.page.currentTags, () => { setVotes(votes + 1) }) }} className=\"upvote fas fa-caret-up\"></i>\r\n              <p className=\"votes\">{votes}</p>\r\n              <i onClick={(e) => { e.stopPropagation(); dislikePost(props.id, props.page.currentTags, () => { setVotes(votes - 1) }) }} className=\"downvote fas fa-caret-down\"></i>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nfunction PostDropdown(props) {\r\n  const dropdown = useRef(null)\r\n  let user = props.user\r\n  let post = props.post\r\n\r\n  const [menuOpen, setMenuOpen] = useState(false)\r\n\r\n  function isInBounds() {\r\n    if (user.rank == 'user' || user.rank == '')\r\n      return false\r\n\r\n    if (user.rank == 'admin')\r\n      return true\r\n\r\n    if (user.moderatedTags.some(elem => post.tags.includes(elem))) {\r\n      return true\r\n    }\r\n    else {\r\n      return false\r\n    }\r\n  }\r\n\r\n  function documentClick(e) {\r\n    if (dropdown.current && !dropdown.current.contains(e.target)) {\r\n      setMenuOpen(false)\r\n    }\r\n  }\r\n\r\n  //const isModInBounds = useModInBounds()\r\n\r\n  useEffect(() => {\r\n    document.addEventListener('mousedown', documentClick)\r\n    return () => {\r\n      document.removeEventListener('mousedown', documentClick)\r\n    }\r\n  }, [])\r\n\r\n  async function flagPost() {\r\n    FlagPost(post._id)\r\n  }\r\n\r\n  async function muteUser() {\r\n    setModalVisibility(\"muteuser\", true, props.username)\r\n  }\r\n\r\n  async function banUser() {\r\n    BanUser(props.username)\r\n  }\r\n\r\n  async function deletePost(id) {\r\n    let result = await DeletePost(id)\r\n    if (result.status == 'success') {\r\n      props.setPosts(state => state.filter(p => p._id != id))\r\n    }\r\n  }\r\n\r\n  return (\r\n    <i className=\"fas fa-ellipsis-v\" ref={dropdown} onClick={(e) => { e.stopPropagation(); setMenuOpen(state => !state) }}>\r\n      {\r\n        !menuOpen ? <></> : <div className=\"dropdown\">\r\n          {\r\n            user.username == props.username || (user.isMod() && isInBounds()) ? <p onClick={(e) => {deletePost(props.post._id) }}>DELETE</p> : <></>\r\n          }\r\n          {\r\n            user.username != props.username ? <p onClick={(e) => { flagPost() }}>FLAG</p> : <></>\r\n          }\r\n          {\r\n            user.isMod() && isInBounds() && user.username != props.username? <p onClick={(e) => {muteUser() }}>MUTE</p> : <></>\r\n          }\r\n          {\r\n            user.rank == 'admin' && user.username != props.username? <p onClick={(e) => { banUser() }}>BAN</p> : <></>\r\n          }\r\n        </div>\r\n      }\r\n    </i>\r\n  )\r\n}\r\n\r\nfunction likePost(id, tag, callback) {\r\n  DoVote('add', tag, id)\r\n    .then((resp) => {\r\n      if (resp.status === \"success\")\r\n        callback()\r\n    })\r\n}\r\n\r\nfunction dislikePost(id, tag, callback) {\r\n  DoVote('subtract', tag, id)\r\n    .then((resp) => {\r\n      if (resp.status === \"success\")\r\n        callback()\r\n    })\r\n}","/* eslint-disable eqeqeq */\r\nimport React, { useEffect, useState, useRef } from 'react'\r\nimport Post from './Post'\r\nimport { GetPosts, FollowTag, QuickSearch, GetPostsByUser, PageSearch } from '../Communicator'\r\nimport { setModalVisibility } from './Modal' //createpost\r\nimport { isAuthenticated, isEmptyOrSpaces } from '../Utils'\r\nimport { Page, User } from '../Config'\r\nimport { showPostPage } from './PostPage'\r\nimport { addToBackButtonStack, showUserProfile } from './RightMenu'\r\nimport { showNotification } from './NoticationBar'\r\nimport { SetDivision } from '../App'\r\n\r\nexport function PostContainer(props) {\r\n\r\n  const [posts, setPosts] = useState([])\r\n  const [filter, setFilter] = useState('new')\r\n  const [viewType, setViewType] = useState(0)\r\n\r\n  useEffect(() => {\r\n    async function fetchData() {\r\n      if (props.page.tags[props.page.tags.length - 1].includes('_user_profile')) {\r\n        let username = props.page.tags[props.page.tags.length - 1].split('_')[0]\r\n        let posts = await GetPostsByUser(username)\r\n\r\n        if (posts.status == 'failure') return showNotification('Could not get Posts')\r\n\r\n        return setPosts(posts.data)\r\n      }\r\n\r\n      let tagsToGet = props.username != null && props.page.tags.length == 1 ?\r\n        [...props.page.currentTags, ...props.user.followingSports, ...props.user.followingCompetitions, ...props.user.followingTeams] : props.page.currentTags\r\n      let posts = await GetPosts(tagsToGet, filter)\r\n      setPosts(posts.data.posts)\r\n    }\r\n\r\n    fetchData()\r\n  }, [props.page.currentTags, filter])\r\n\r\n  function followText(user) {\r\n    function execute(array) {\r\n      let isUsed = false\r\n\r\n      for (let item of array) {\r\n        if (item[0] == props.page.currentTags[0]) {\r\n          isUsed = true\r\n          break\r\n        }\r\n      }\r\n\r\n      return <div id=\"follow-btn\" onClick={() => { isUsed ? followClicked(user, false) : followClicked(user, true) }}>{isUsed ? <p>Unfollow</p> : <p>Follow this!</p>}</div>\r\n    }\r\n\r\n    if (props.page.currentTags[0].includes('_team_result'))\r\n      return execute(user.followingTeams)\r\n    else\r\n      return execute(user.followingCompetitions)\r\n  }\r\n\r\n  async function followClicked(user, isAdded) {\r\n    let name, type\r\n\r\n    if (props.page.currentTags[0].includes('_team_result')) {\r\n      name = props.page.currentTags[0].split('_')[0]\r\n      type = 'team'\r\n    }\r\n    else if (props.page.currentTags[0].includes('_competition_result')) {\r\n      name = props.page.currentTags[0].split('_')[0]\r\n      type = 'competition'\r\n    }\r\n    else {\r\n      return\r\n    }\r\n\r\n    let result = await FollowTag(props.page.currentTags, name, type, isAdded)\r\n\r\n    if (result.status == 'success') {\r\n      if (type == 'team') {\r\n        if (isAdded)\r\n          user.editTeams([props.page.currentTags[0], name], 'add')\r\n        else\r\n          user.editTeams([props.page.currentTags[0], name], 'remove')\r\n      } else {\r\n        if (isAdded)\r\n          user.editCompetitions([props.page.currentTags[0], name], 'add')\r\n        else\r\n          user.editCompetitions([props.page.currentTags[0], name], 'remove')\r\n      }\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div id=\"main-holder\">\r\n      {\r\n        <div id=\"post-container\">\r\n          <SearchBar type=\"mobile\" page={props.page}></SearchBar>\r\n          <CreatePostBar></CreatePostBar>\r\n          <User.Consumer>\r\n            {user =>\r\n              isAuthenticated() && props.page.tags.length > 1 &&\r\n                (props.page.currentTags[0].includes('_team_result') || props.page.currentTags[0].includes('_competition_result')) ?\r\n                followText(user)\r\n                : <></>\r\n            }\r\n          </User.Consumer>\r\n          <FilterBar viewType={viewType} setViewType={setViewType} setFilter={setFilter}></FilterBar>\r\n          <CreatePostButton></CreatePostButton>\r\n          <Page.Consumer>\r\n            {page =>\r\n              posts.map(post => (\r\n                <Post\r\n                  setDivision={props.setDivision}\r\n                  setPosts={setPosts}\r\n                  page={page}\r\n                  viewType={viewType}\r\n                  post={post}\r\n                  key={post._id}\r\n                  id={post._id}\r\n                  votes={post.votes}\r\n                  username={post.username}\r\n                  title={post.title}\r\n                  body={post.body}\r\n                  time={post.time}></Post>\r\n              ))\r\n            }\r\n          </Page.Consumer>\r\n        </div>\r\n      }\r\n    </div>\r\n  )\r\n}\r\n\r\nfunction CreatePostBar() {\r\n  if (!isAuthenticated())\r\n    return null\r\n\r\n  return (\r\n    <div id=\"create-post-bar\">\r\n      <i className=\"fas fa-newspaper\"></i>\r\n      <input placeholder=\"Create post...\" onClick={() => { setModalVisibility(\"createpost\", true) }}></input>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport function SearchBar(props) {\r\n\r\n  const [typingTimer, setTypingTimer] = useState(null)\r\n  const [activated, setActivation] = useState(false)\r\n  const [searchResults, setSearchResults] = useState({ teams: [], posts: [], competitions: [], fixtures: [], users: [] })\r\n  const [term, setTerm] = useState('')\r\n\r\n  function inputChanged(term) {\r\n\r\n    if (typingTimer)\r\n      clearInterval(typingTimer)\r\n\r\n    setTypingTimer(setTimeout(async () => {\r\n      if (isEmptyOrSpaces(term)) {\r\n        setActivation(false)\r\n        return setSearchResults({ teams: [], posts: [], competitions: [], fixtures: [], users: [] })\r\n      }\r\n\r\n      setTerm(term)\r\n\r\n      let result = await QuickSearch(term)\r\n      if (result.status == 'success') {\r\n        setSearchResults(result.data)\r\n        setActivation(true)\r\n      }\r\n    }, 1000))\r\n  }\r\n\r\n  if(props.type == 'mobile'){\r\n    return (\r\n      <div className=\"searchbar mobile\" onChange={(e) => { inputChanged(e.target.value) }} onClick={() => { }}>\r\n        <i className=\"fas fa-search\"></i>\r\n        <input placeholder=\"Search...\"></input>\r\n        <SearchPage term={term} setSearchResults={setSearchResults} pageProvider={props.page} setVisibility={setActivation} activated={activated} searchResults={searchResults}></SearchPage>\r\n      </div>\r\n    )\r\n  }\r\n  else{\r\n    return (\r\n      <div className=\"searchbar desktop\" onChange={(e) => { inputChanged(e.target.value) }} onClick={() => { }}>\r\n        <i className=\"fas fa-search\"></i>\r\n        <input placeholder=\"Search...\"></input>\r\n        <SearchPage term={term} setSearchResults={setSearchResults} pageProvider={props.page} setVisibility={setActivation} activated={activated} searchResults={searchResults}></SearchPage>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nfunction SearchPage(props) {\r\n  const searchPage = useRef(null)\r\n\r\n  function documentClick(e){\r\n    if (searchPage.current && !searchPage.current.contains(e.target)) {\r\n        props.setVisibility(false)\r\n    }\r\n}\r\n\r\nuseEffect(() => {\r\n    document.addEventListener('mousedown', documentClick)\r\n    return () => {\r\n        document.removeEventListener('mousedown', documentClick)\r\n    }\r\n}, [])\r\n\r\n  if (!props.activated)\r\n    return null\r\n\r\n  let searchResults = props.searchResults\r\n\r\n  async function TeamSearched(team) {\r\n    props.pageProvider.setTags(['home', 'team', `${team}_team_result`])\r\n    addToBackButtonStack(2, props.pageProvider, 1)\r\n    props.setVisibility(false)\r\n  }\r\n\r\n  async function FixtureSearched(fixture) {\r\n    props.pageProvider.setTags(['home', 'competition', `${fixture.league.name}_competition_result`, `${fixture.fixture_id}_fixture_details`])\r\n    addToBackButtonStack(3, props.pageProvider, 2, fixture)\r\n    props.setVisibility(false)\r\n  }\r\n\r\n  async function CompetitionSearched(competition) {\r\n    props.pageProvider.setTags(['home', 'competition', `${competition}_competition_result`])\r\n    addToBackButtonStack(2, props.pageProvider, 1)\r\n    props.setVisibility(false)\r\n  }\r\n\r\n  async function UserSearched(user) {\r\n    showUserProfile(user.username, props.pageProvider)\r\n    props.setVisibility(false)\r\n  }\r\n\r\n  async function PostSearched(post) {\r\n    post.totalVotes = post.votes.reduce((prev, curr) => prev.votes + curr.votes, { votes: 0 })\r\n    let timeVal = parseInt(post.time)\r\n    let date = new Date(timeVal)\r\n    post.date = date.toLocaleString()\r\n    SetDivision('post')\r\n    showPostPage(true, post)\r\n    props.setVisibility(false)\r\n  }\r\n\r\n  async function SearchInPage(tag, term) {\r\n    let result = await PageSearch(term, tag)\r\n    if (result.status == 'failure')\r\n      return showNotification(\"Could not find anything\")\r\n\r\n    props.setSearchResults({ teams: [], posts: result.data, competitions: [], fixtures: [], users: [] })\r\n  }\r\n\r\n  let isEmpty = true\r\n\r\n  for(let item in searchResults){\r\n    if(searchResults[item].length > 0)\r\n      isEmpty = false\r\n  }\r\n\r\n  return (\r\n    <div id=\"search-page\" ref={searchPage}>\r\n      <div className=\"header\">\r\n        {\r\n          props.pageProvider.tags.length > 2 ? <p className=\"extra-search\" onClick={() => { SearchInPage(props.pageProvider.currentTags[props.pageProvider.currentTags.length - 1], props.term) }}>Search on this page only</p> : <></>\r\n        }\r\n      </div>\r\n      {\r\n        isEmpty ? <p>No items found.</p> : <></>\r\n      }\r\n      {searchResults.teams.length == 0 ? <></> :\r\n        <div className=\"team-search section\">\r\n          <p className=\"title\">Teams</p>\r\n          <div className=\"divider\"></div>\r\n          {\r\n            [...new Set(searchResults.teams.map(item => item.name))].map(item => <p onClick={() => { TeamSearched(item) }} className=\"result\" key={item}>{item}</p>)\r\n          }\r\n        </div>\r\n      }\r\n      {\r\n        searchResults.fixtures.length == 0 ? <></> :\r\n          <div className=\"fixture-search section\">\r\n            <p className=\"title\">Fixtures</p>\r\n            <div className=\"divider\"></div>\r\n            {\r\n              [...new Set(searchResults.fixtures)].map(item => <p onClick={() => { FixtureSearched(item) }} className=\"result\" key={item.fixture_id}>{`${item.homeTeam.team_name} v ${item.awayTeam.team_name}`}</p>)\r\n            }\r\n          </div>\r\n      }\r\n      {\r\n        searchResults.competitions.length == 0 ? <></> :\r\n          <div className=\"competition-search section\">\r\n            <p className=\"title\">Competitions</p>\r\n            <div className=\"divider\"></div>\r\n            {\r\n              [...new Set(searchResults.competitions.map(item => item.name))].map(item => <p onClick={() => { CompetitionSearched(item) }} className=\"result\" key={item}>{item}</p>)\r\n            }\r\n          </div>\r\n      }\r\n      {\r\n        searchResults.users.length == 0 ? <></> :\r\n          <div className=\"user-search section\">\r\n            <p className=\"title\">Users</p>\r\n            <div className=\"divider\"></div>\r\n            {\r\n              [...new Set(searchResults.users)].map(item => <p onClick={() => { UserSearched(item) }} className=\"result\" key={item.username}>{item.username}</p>)\r\n            }\r\n          </div>\r\n      }\r\n      {\r\n        searchResults.posts.length == 0 ? <></> :\r\n          <div className=\"post-search section\">\r\n            <p className=\"title\">Posts</p>\r\n            <div className=\"divider\"></div>\r\n            {\r\n              [...new Set(searchResults.posts)].map(item => <p onClick={() => { PostSearched(item) }} className=\"result\" key={item.title}>{item.title}</p>)\r\n            }\r\n          </div>\r\n      }\r\n    </div>\r\n  )\r\n}\r\n\r\nfunction FilterBar(props) {\r\n\r\n  const [dropdownVisibility, setDropdownVisibility] = useState(false)\r\n  const [buttonDisplayData, setButtonDisplayData] = useState(['NEW', 'fas fa-certificate'])\r\n  const dropdown = useRef(null)\r\n\r\n  function dropdownSelect(filter, icon) {\r\n    props.setFilter(filter)\r\n    setButtonDisplayData([filter.toUpperCase(), icon])\r\n    setDropdownVisibility(false)\r\n  }\r\n\r\n  function documentClick(e) {\r\n    if (dropdown.current && !dropdown.current.contains(e.target) && dropdownVisibility) {\r\n      setDropdownVisibility(false)\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    document.addEventListener('mousedown', documentClick)\r\n\r\n    return () => {\r\n      document.removeEventListener('mousedown', documentClick)\r\n    }\r\n  }, [dropdownVisibility])\r\n\r\n  return (\r\n    <div id=\"filterbar\">\r\n      <div id=\"filter-selector\" ref={dropdown} onClick={() => { setDropdownVisibility(state => !state) }}>\r\n        <i className={buttonDisplayData[1]}></i>\r\n        <div className=\"divider\"></div>\r\n        <p>{buttonDisplayData[0]}</p>\r\n        {\r\n          !dropdownVisibility ? <></> : <div className=\"dropdown\" onClick={(e) => { e.stopPropagation() }}>\r\n            <p onClick={() => { dropdownSelect('Top', 'fas fa-chart-line') }}>Top</p>\r\n            <p onClick={() => { dropdownSelect('Hot', 'fas fa-burn') }}>Hot</p>\r\n            <p onClick={() => { dropdownSelect('Trending', 'fab fa-red-river') }}>Trending</p>\r\n            <p onClick={() => { dropdownSelect('New', 'fas fa-certificate') }}>New</p>\r\n            <p onClick={() => { dropdownSelect('Controvertial', 'fas fa-skull-crossbones') }}>Controvertial</p>\r\n          </div>\r\n        }\r\n      </div>\r\n\r\n      <div id=\"view-selector\">\r\n        <p>VIEW</p>\r\n        <div className=\"divider\"></div>\r\n        <i onClick={() => { props.setViewType(0) }} className=\"fas fa-th-list\"></i>\r\n        <i onClick={() => { props.setViewType(1) }} className=\"fas fa-stream\"></i>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nfunction CreatePostButton() {\r\n\r\n  if (!isAuthenticated())\r\n    return null\r\n\r\n  return (\r\n    <div id=\"create-post-btn\" onClick={() => { setModalVisibility(\"createpost\", true) }}>\r\n      <div className=\"row\">\r\n        <i className=\"icon fas fa-envelope\"></i>\r\n        <p>CREATE POST</p>\r\n      </div>\r\n      <div className=\"shadow\">\r\n      </div>\r\n    </div>\r\n  )\r\n}","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './style.css';\nimport App from './App';\nimport UserProvider, { User, PageProvider } from './Config'\n\nReactDOM.render(\n  <React.StrictMode>\n    <UserProvider>\n      <PageProvider>\n        <User.Consumer>{\n          user => <App user={user} />\n        }\n        </User.Consumer>\n      </PageProvider>\n    </UserProvider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}